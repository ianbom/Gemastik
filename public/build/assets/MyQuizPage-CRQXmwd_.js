import{r as m,j as e,J as T}from"./app-D1PQqydB.js";import{B as h,L as N,c as b,C as D}from"./CitizenLayout-D6PfXXw3.js";import{B as d,I as K}from"./input-BOaatTCr.js";import{C as g,b as M,c as q,a as j}from"./card-DS9sCv-E.js";import{S as v,a as w,b as C,c as S,d as l}from"./select-Bh72tW7-.js";import{f as L}from"./formatDate-DdkzSpcV.js";import{S as Q}from"./sliders-horizontal-CIx4Y1C6.js";import{R as z}from"./refresh-ccw-DVaoXrPH.js";import{C as A}from"./clock-B_QCzn2Y.js";import{T as $}from"./trophy-CvaLBuG1.js";import{c as I}from"./createLucideIcon--13BBMxb.js";import"./index-Clxr7tAl.js";import"./Combination-Dr_exLUy.js";import"./index-DwRUccRl.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=I("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),V=a=>{switch(a){case"mudah":return"bg-green-100 text-green-800";case"sedang":return"bg-yellow-100 text-yellow-800";case"sulit":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=a=>a===100?"bg-emerald-100 text-emerald-800":a>=80?"bg-sky-100 text-sky-800":a>=60?"bg-amber-100 text-amber-800":"bg-rose-100 text-rose-800",H=a=>a===100?"text-green-600":a>=80?"text-blue-600":a>=60?"text-yellow-600":"text-red-600",J=({myQuizAttempts:a})=>{console.log("myQuizAttempts:",a);const r=(a.length>0,a),[i,c]=m.useState(""),[F,B]=m.useState("all"),[o,f]=m.useState("all"),[t,p]=m.useState("all"),k=r.filter(s=>{const u=s.quiz.title.toLowerCase().includes(i.toLowerCase()),P=o==="all"||s.quiz.difficulty===o;let n=!0;return t==="perfect"?n=s.score===100:t==="good"?n=s.score>=80&&s.score<100:t==="fair"?n=s.score>=60&&s.score<80:t==="poor"&&(n=s.score<60),u&&P&&n}),y=()=>{c(""),B("all"),f("all"),p("all")},x=i.trim()||F!=="all"||o!=="all"||t!=="all",R=s=>{console.log(`Retaking quiz with ID: ${s}`),window.location.href=`/quiz/${s}`};return e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-1 text-2xl font-bold text-gray-900 sm:text-3xl",children:"Riwayat Kuis Yang Dikerjakan"}),e.jsx("p",{className:"text-gray-600",children:"Berikut adalah riwayat kuis yang telah Anda kerjakan. Kerjakan ulang kuis untuk meningkatkan skor dan mendapatkan poin!"}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Total Kuis Dikerjakan: ",r.length]}),e.jsxs("span",{children:["Skor Rata-rata:"," ",Math.round(r.reduce((s,u)=>s+u.score,0)/r.length)||0]}),e.jsxs("span",{children:["Perfect Score:"," ",r.filter(s=>s.score===100).length]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(d,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>window.location.href="/quiz",children:"Cari Kuis Baru"})})]}),e.jsxs(g,{className:"mb-6",children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"flex items-center justify-between gap-4 text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{size:20,className:"mr-2 text-emerald-600"}),"Filter Kuis"]}),x&&e.jsx(h,{variant:"secondary",className:"bg-emerald-100 text-emerald-600",children:"Filter Aktif"})]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:y,disabled:!x,children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Reset Filter"]})]})}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tingkat Kesulitan"}),e.jsxs(v,{value:o,onValueChange:f,children:[e.jsx(w,{children:e.jsx(C,{placeholder:"Semua Tingkat"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"Semua Tingkat"}),e.jsx(l,{value:"mudah",children:"Mudah"}),e.jsx(l,{value:"sedang",children:"Sedang"}),e.jsx(l,{value:"sulit",children:"Sulit"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Skor"}),e.jsxs(v,{value:t,onValueChange:p,children:[e.jsx(w,{children:e.jsx(C,{placeholder:"Semua Skor"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"Semua Skor"}),e.jsx(l,{value:"perfect",children:"Perfect (100)"}),e.jsx(l,{value:"good",children:"Bagus (80-99)"}),e.jsx(l,{value:"fair",children:"Cukup (60-79)"}),e.jsx(l,{value:"poor",children:"Perlu Diperbaiki (<60)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Pencarian Kuis"}),e.jsx(K,{type:"text",placeholder:"Cari berdasarkan judul kuis...",value:i,onChange:s=>c(s.target.value)})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[k.map(s=>e.jsx(g,{className:"transition-shadow hover:shadow-md",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-3 flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-xl font-semibold text-gray-800",children:s.quiz.title}),e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.quiz.difficulty&&e.jsx(h,{className:`text-xs ${V(s.quiz.difficulty)}`,children:s.quiz.difficulty==="mudah"?"Mudah":s.quiz.difficulty==="sedang"?"Sedang":"Sulit"}),e.jsx(h,{className:`text-xs ${E(s.score)}`,children:s.score===100?"Perfect!":s.score>=80?"Bagus":s.score>=60?"Cukup":"Perlu Diperbaiki"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{children:L(s.created_at)})]}),s.total_questions&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("span",{children:["Soal:"," ",s.total_questions," ","pertanyaan"]})]}),s.score===100&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-purple-600"}),e.jsxs("span",{children:["Poin: +",s.quiz.points_reward]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3 lg:min-w-[200px]",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.score===100&&e.jsx(b,{className:"h-5 w-5 text-green-600"}),e.jsx("p",{className:`text-3xl font-bold ${H(s.score)}`,children:s.score}),e.jsx("span",{className:"text-lg text-gray-500",children:"/ 100"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Skor Akhir"})]}),s.score<100&&e.jsxs(d,{onClick:()=>R(s.quiz.id),className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700",size:"sm",children:[e.jsx(_,{className:"h-4 w-4"}),"Kerjakan Ulang"]}),s.score===100&&e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-green-600",children:[e.jsx(b,{className:"h-4 w-4"}),"Skor Sempurna!"]})]})]})})},s.id)),k.length===0&&e.jsx(g,{children:e.jsxs(j,{className:"flex flex-col items-center py-12 text-center",children:[e.jsx(N,{className:"mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"Tidak ada kuis ditemukan"}),e.jsx("p",{className:"mb-4 text-gray-500",children:x?"Coba ubah filter pencarian atau reset filter untuk melihat semua kuis.":"Belum ada kuis yang dikerjakan. Mulai kerjakan kuis pertama Anda!"}),x?e.jsxs(d,{variant:"outline",onClick:y,children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Reset Filter"]}):e.jsx(d,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>window.location.href="/quiz",children:"Mulai Kuis"})]})})]})]})},ce=()=>{var c;const{props:a}=T(),r=a.myQuizAttempts||[],i=((c=a.auth)==null?void 0:c.user)??null;return i?e.jsx(D,{currentPage:"my-merchandise",children:e.jsx(J,{auth:{user:i},myQuizAttempts:r})}):null};export{ce as default};
