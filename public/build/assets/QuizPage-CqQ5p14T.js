import{r as x,j as e,J as Q,S as D}from"./app-D1PQqydB.js";import{B as d,C as A}from"./CitizenLayout-D6PfXXw3.js";import{B as f,I as p}from"./input-BOaatTCr.js";import{C as y,b as z,c as I,a as B}from"./card-DS9sCv-E.js";import{S as v,a as N,b,c as w,d as r}from"./select-Bh72tW7-.js";import{T as P}from"./Combination-Dr_exLUy.js";import{S as R}from"./sliders-horizontal-CIx4Y1C6.js";import{R as M}from"./refresh-ccw-DVaoXrPH.js";import{S as V}from"./search-DduYLnXE.js";import{T as E}from"./trophy-CvaLBuG1.js";import{C as H}from"./clock-B_QCzn2Y.js";import{P as J}from"./play-DZoPEyww.js";import"./index-Clxr7tAl.js";import"./createLucideIcon--13BBMxb.js";import"./index-DwRUccRl.js";const O=({quizzes:m,onViewDetails:o,onCreateQuiz:u,canCreate:h=!1})=>{const[n,j]=x.useState("newest"),[l,g]=x.useState(""),[C,F]=x.useState(m),[t,k]=x.useState({difficulty:"semua",status:"semua",minPoints:"",maxPoints:""}),c=(s,a)=>{k(i=>({...i,[s]:a}))},S=()=>{k({difficulty:"semua",status:"semua",minPoints:"",maxPoints:""}),g("")};x.useEffect(()=>{let s=[...m];if(l.trim()&&(s=s.filter(a=>{var i;return a.title.toLowerCase().includes(l.toLowerCase())||((i=a.description)==null?void 0:i.toLowerCase().includes(l.toLowerCase()))})),t.difficulty!=="semua"&&(s=s.filter(a=>a.difficulty.toLowerCase()===t.difficulty.toLowerCase())),t.status!=="semua"&&(t.status==="aktif"?s=s.filter(a=>a.is_active):t.status==="nonaktif"&&(s=s.filter(a=>!a.is_active))),t.minPoints){const a=parseInt(t.minPoints);s=s.filter(i=>i.points_reward>=a)}if(t.maxPoints){const a=parseInt(t.maxPoints);s=s.filter(i=>i.points_reward<=a)}if(n==="newest")s.sort((a,i)=>new Date(i.created_at).getTime()-new Date(a.created_at).getTime());else if(n==="oldest")s.sort((a,i)=>new Date(a.created_at).getTime()-new Date(i.created_at).getTime());else if(n==="points")s.sort((a,i)=>i.points_reward-a.points_reward);else if(n==="difficulty"){const a={mudah:1,sedang:2,sulit:3};s.sort((i,L)=>a[i.difficulty]-a[L.difficulty])}else n==="title"&&s.sort((a,i)=>a.title.localeCompare(i.title));F(s)},[m,l,n,t]);const K=s=>{switch(s){case"mudah":return"bg-green-100 text-green-700 border-green-200";case"sedang":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"sulit":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},_=s=>{switch(s){case"mudah":return"Mudah";case"sedang":return"Sedang";case"sulit":return"Sulit";default:return s}},T=l.trim()||t.difficulty!=="semua"||t.status!=="semua"||t.minPoints||t.maxPoints;return e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col items-start justify-between md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"Daftar Kuis"}),e.jsx("p",{className:"text-gray-600",children:"Asah pengetahuan lingkungan Anda dan dapatkan poin reward"})]}),h&&u&&e.jsxs(f,{onClick:u,className:"mt-4 bg-emerald-700 text-white hover:bg-emerald-800 md:mt-0",size:"lg",children:[e.jsx(P,{size:20,className:"mr-2"}),"Buat Kuis Baru"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(y,{className:"sticky top-24 overflow-visible",children:[e.jsx(z,{children:e.jsxs(I,{className:"flex items-center justify-between text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{size:20,className:"mr-2 text-emerald-600"}),"Filter Kuis"]}),T&&e.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-1 text-xs text-emerald-600",children:"Aktif"})]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tingkat Kesulitan"}),e.jsxs(v,{value:t.difficulty,onValueChange:s=>c("difficulty",s),children:[e.jsx(N,{children:e.jsx(b,{placeholder:"Pilih kesulitan"})}),e.jsxs(w,{children:[e.jsx(r,{value:"semua",children:"Semua Tingkat"}),e.jsx(r,{value:"mudah",children:"Mudah"}),e.jsx(r,{value:"sedang",children:"Sedang"}),e.jsx(r,{value:"sulit",children:"Sulit"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(v,{value:t.status,onValueChange:s=>c("status",s),children:[e.jsx(N,{children:e.jsx(b,{placeholder:"Pilih status"})}),e.jsxs(w,{children:[e.jsx(r,{value:"semua",children:"Semua Status"}),e.jsx(r,{value:"aktif",children:"Aktif"}),e.jsx(r,{value:"nonaktif",children:"Non-aktif"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Poin Minimum"}),e.jsx(p,{type:"number",placeholder:"0",value:t.minPoints,onChange:s=>c("minPoints",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Poin Maksimum"}),e.jsx(p,{type:"number",placeholder:"100",value:t.maxPoints,onChange:s=>c("maxPoints",s.target.value)})]}),e.jsx("div",{className:"space-y-2 pt-4",children:e.jsxs(f,{variant:"outline",className:"flex w-full items-center justify-center gap-2",onClick:S,disabled:!T,children:[e.jsx(M,{className:"h-4 w-4"}),"Reset Filter"]})})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(v,{value:n,onValueChange:j,children:[e.jsx(N,{className:"w-48",children:e.jsx(b,{placeholder:"Urutkan berdasarkan"})}),e.jsxs(w,{children:[e.jsx(r,{value:"newest",children:"Terbaru"}),e.jsx(r,{value:"oldest",children:"Terlama"}),e.jsx(r,{value:"points",children:"Poin Tertinggi"}),e.jsx(r,{value:"difficulty",children:"Kesulitan"}),e.jsx(r,{value:"title",children:"Judul A-Z"})]})]})}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(V,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(p,{placeholder:"Cari kuis...",className:"pl-10",value:l,onChange:s=>g(s.target.value)})]})]}),(t.difficulty!=="semua"||t.status!=="semua"||t.minPoints||t.maxPoints||l)&&e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[e.jsx("span",{className:"mr-2 text-sm font-medium text-gray-700",children:"Filter aktif:"}),l&&e.jsxs(d,{variant:"secondary",className:"flex items-center gap-1",children:['Pencarian: "',l,'"',e.jsx("button",{onClick:()=>g(""),className:"ml-1 text-xs",children:"×"})]}),t.difficulty!=="semua"&&e.jsxs(d,{variant:"secondary",className:"flex items-center gap-1",children:["Kesulitan:"," ",_(t.difficulty),e.jsx("button",{onClick:()=>c("difficulty","semua"),className:"ml-1 text-xs",children:"×"})]}),t.status!=="semua"&&e.jsxs(d,{variant:"secondary",className:"flex items-center gap-1",children:["Status: ",t.status,e.jsx("button",{onClick:()=>c("status","semua"),className:"ml-1 text-xs",children:"×"})]}),(t.minPoints||t.maxPoints)&&e.jsxs(d,{variant:"secondary",className:"flex items-center gap-1",children:["Poin: ",t.minPoints||"0"," -"," ",t.maxPoints||"∞",e.jsx("button",{onClick:()=>{c("minPoints",""),c("maxPoints","")},className:"ml-1 text-xs",children:"×"})]})]}),C.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:C.map(s=>e.jsxs(y,{className:"group cursor-pointer border-0 shadow-md transition-all duration-300 hover:-translate-y-1 hover:shadow-lg",onClick:()=>o(s.id),children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-lg",children:[s.thumbnail_url?e.jsx("img",{src:s.thumbnail_url.startsWith("/storage/")?s.thumbnail_url:`/storage/${s.thumbnail_url}`,alt:s.title,className:"h-48 w-full object-cover transition-transform duration-300 group-hover:scale-105"}):e.jsx("div",{className:"flex h-48 w-full items-center justify-center bg-gradient-to-br from-emerald-400 to-emerald-600",children:e.jsx(P,{className:"h-16 w-16 text-white opacity-80"})}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(d,{className:K(s.difficulty),children:_(s.difficulty)})}),!s.is_active&&e.jsx("div",{className:"absolute left-3 top-3",children:e.jsx(d,{className:"bg-gray-100 text-gray-700",children:"Non-aktif"})})]}),e.jsxs(B,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 line-clamp-2 font-semibold text-gray-900 transition-colors group-hover:text-emerald-600",children:s.title}),s.description&&e.jsx("p",{className:"mb-3 line-clamp-2 text-sm text-gray-600",children:s.description}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-emerald-600",children:[e.jsx(E,{size:14,className:"mr-1"}),e.jsxs("span",{className:"font-medium",children:[s.points_reward," poin"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(H,{size:14,className:"mr-1"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("id-ID")})]})]}),e.jsxs(f,{className:"mt-auto w-full bg-amber-600 transition-colors duration-200 hover:bg-amber-700",onClick:a=>{a.stopPropagation(),o(s.id)},disabled:!s.is_active,children:[e.jsx(J,{size:16,className:"mr-2"}),s.is_active?"Mulai Kuis":"Kuis Non-aktif"]})]})]},s.id))}):e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs(y,{className:"w-full px-8 py-32 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"rounded-full bg-gray-100 p-4",children:e.jsx(P,{className:"h-12 w-12 text-gray-400"})})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:l||t.difficulty!=="semua"||t.status!=="semua"||t.minPoints||t.maxPoints?"Tidak Ada Kuis yang Sesuai Filter":"Kuis Belum Tersedia"}),e.jsx("p",{className:"text-sm text-gray-500",children:l||t.difficulty!=="semua"||t.status!=="semua"||t.minPoints||t.maxPoints?"Coba ubah atau hapus beberapa filter untuk melihat lebih banyak kuis.":"Belum ada kuis yang tersedia saat ini. Silakan cek kembali nanti."}),(l||t.difficulty!=="semua"||t.status!=="semua"||t.minPoints||t.maxPoints)&&e.jsx(f,{variant:"outline",className:"mt-4",onClick:S,children:"Reset Semua Filter"})]})})]})]})]})},ne=()=>{const{props:m}=Q(),o=m.quizzes,u=m.canCreate||!1,h=j=>{D.visit(route("quiz.show",{id:j}))},n=()=>{D.visit(route("quiz.create"))};return console.log("quizzes",o),e.jsx(A,{currentPage:"quiz",children:e.jsx(O,{quizzes:o,onViewDetails:h,onCreateQuiz:u?n:void 0,canCreate:u})})};export{ne as default};
