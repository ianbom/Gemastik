import{r as l,j as e,S as U,x as ns,R as Gs,J as os,Q as Js,a as Qs}from"./app-D1PQqydB.js";import{X as ue,U as Xe,A as qe,d as Ge,e as Je,u as Qe,C as Zs}from"./CitizenLayout-D6PfXXw3.js";import{I as et,B as R}from"./input-BOaatTCr.js";import{C as Z,a as ee,b as Ze,c as es}from"./card-DS9sCv-E.js";import{T as st}from"./textarea-EwAyr6Kf.js";import{g as tt,T as rt}from"./categoryReportLabel-C6qXczy-.js";import{f as V}from"./formatDate-DdkzSpcV.js";import{g as at,a as nt}from"./missionStatusLabel-hBdcFGI7.js";import{g as ot,a as lt}from"./reportStatusLabel-CeJ63OXr.js";import{B as K,I as ss}from"./ImageWithPopup-CWzmc1Rm.js";import{P as B,u as F,c as se}from"./index-Clxr7tAl.js";import{c as ls,P as Y,u as it,a as M,b as ct,C as dt,d as mt,e as O,f as ut,H as he}from"./Combination-Dr_exLUy.js";import{u as ht,c as xt,C as pt,a as gt}from"./index-DwRUccRl.js";import{D as X,a as q,b as G,c as is,e as ge,G as ft}from"./dialog-BrukTp7d.js";import{L as de}from"./label-B5mS19Xq.js";import{c as J}from"./createLucideIcon--13BBMxb.js";import{U as xe,F as bt}from"./upload-BLX4w0hK.js";import{U as ts}from"./users-Dz3wCDe9.js";import{A as jt}from"./arrow-left-CE1yri2s.js";import{C as me}from"./calendar-B_2puXlR.js";import{M as vt}from"./map-pin-D80-uoOx.js";import{T as yt}from"./thumbs-down-D3eec7d2.js";import"./index-ur6M6Mn0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=J("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=J("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=J("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=J("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var ae="Checkbox",[Dt,Rr]=ls(ae),[Rt,fe]=Dt(ae);function Pt(s){const{__scopeCheckbox:r,checked:t,children:n,defaultChecked:a,disabled:o,form:c,name:i,onCheckedChange:m,required:x,value:d="on",internal_do_not_use_render:u}=s,[h,v]=it({prop:t,defaultProp:a??!1,onChange:m,caller:ae}),[b,k]=l.useState(null),[P,p]=l.useState(null),y=l.useRef(!1),g=b?!!c||!!b.closest("form"):!0,j={checked:h,disabled:o,setChecked:v,control:b,setControl:k,name:i,form:c,value:d,hasConsumerStoppedPropagationRef:y,required:x,defaultChecked:z(a)?!1:a,isFormControl:g,bubbleInput:P,setBubbleInput:p};return e.jsx(Rt,{scope:r,...j,children:At(u)?u(j):n})}var cs="CheckboxTrigger",ds=l.forwardRef(({__scopeCheckbox:s,onKeyDown:r,onClick:t,...n},a)=>{const{control:o,value:c,disabled:i,checked:m,required:x,setControl:d,setChecked:u,hasConsumerStoppedPropagationRef:h,isFormControl:v,bubbleInput:b}=fe(cs,s),k=F(a,d),P=l.useRef(m);return l.useEffect(()=>{const p=o==null?void 0:o.form;if(p){const y=()=>u(P.current);return p.addEventListener("reset",y),()=>p.removeEventListener("reset",y)}},[o,u]),e.jsx(B.button,{type:"button",role:"checkbox","aria-checked":z(m)?"mixed":m,"aria-required":x,"data-state":ps(m),"data-disabled":i?"":void 0,disabled:i,value:c,...n,ref:k,onKeyDown:M(r,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:M(t,p=>{u(y=>z(y)?!0:!y),b&&v&&(h.current=p.isPropagationStopped(),h.current||p.stopPropagation())})})});ds.displayName=cs;var be=l.forwardRef((s,r)=>{const{__scopeCheckbox:t,name:n,checked:a,defaultChecked:o,required:c,disabled:i,value:m,onCheckedChange:x,form:d,...u}=s;return e.jsx(Pt,{__scopeCheckbox:t,checked:a,defaultChecked:o,disabled:i,required:c,onCheckedChange:x,name:n,form:d,value:m,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(ds,{...u,ref:r,__scopeCheckbox:t}),h&&e.jsx(xs,{__scopeCheckbox:t})]})})});be.displayName=ae;var ms="CheckboxIndicator",us=l.forwardRef((s,r)=>{const{__scopeCheckbox:t,forceMount:n,...a}=s,o=fe(ms,t);return e.jsx(Y,{present:n||z(o.checked)||o.checked===!0,children:e.jsx(B.span,{"data-state":ps(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...s.style}})})});us.displayName=ms;var hs="CheckboxBubbleInput",xs=l.forwardRef(({__scopeCheckbox:s,...r},t)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:c,required:i,disabled:m,name:x,value:d,form:u,bubbleInput:h,setBubbleInput:v}=fe(hs,s),b=F(t,v),k=ht(o),P=ct(n);l.useEffect(()=>{const y=h;if(!y)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set,C=!a.current;if(k!==o&&w){const S=new Event("click",{bubbles:C});y.indeterminate=z(o),w.call(y,z(o)?!1:o),y.dispatchEvent(S)}},[h,k,o,a]);const p=l.useRef(z(o)?!1:o);return e.jsx(B.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??p.current,required:i,disabled:m,name:x,value:d,form:u,...r,tabIndex:-1,ref:b,style:{...r.style,...P,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xs.displayName=hs;function At(s){return typeof s=="function"}function z(s){return s==="indeterminate"}function ps(s){return z(s)?"indeterminate":s?"checked":"unchecked"}const gs=l.forwardRef(({className:s,...r},t)=>e.jsx(be,{ref:t,className:se("border-primary ring-offset-background focus-visible:ring-ring data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground peer h-4 w-4 shrink-0 rounded-sm border focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:e.jsx(us,{className:se("flex items-center justify-center text-current"),children:e.jsx(dt,{className:"h-4 w-4"})})}));gs.displayName=be.displayName;function _t(s,r){return l.useReducer((t,n)=>r[t][n]??t,s)}var je="ScrollArea",[fs,Pr]=ls(je),[Tt,T]=fs(je),bs=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,type:n="hover",dir:a,scrollHideDelay:o=600,...c}=s,[i,m]=l.useState(null),[x,d]=l.useState(null),[u,h]=l.useState(null),[v,b]=l.useState(null),[k,P]=l.useState(null),[p,y]=l.useState(0),[g,j]=l.useState(0),[w,C]=l.useState(!1),[S,_]=l.useState(!1),D=F(r,E=>m(E)),A=mt(a);return e.jsx(Tt,{scope:t,type:n,dir:A,scrollHideDelay:o,scrollArea:i,viewport:x,onViewportChange:d,content:u,onContentChange:h,scrollbarX:v,onScrollbarXChange:b,scrollbarXEnabled:w,onScrollbarXEnabledChange:C,scrollbarY:k,onScrollbarYChange:P,scrollbarYEnabled:S,onScrollbarYEnabledChange:_,onCornerWidthChange:y,onCornerHeightChange:j,children:e.jsx(B.div,{dir:A,...c,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":p+"px","--radix-scroll-area-corner-height":g+"px",...s.style}})})});bs.displayName=je;var js="ScrollAreaViewport",vs=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,children:n,nonce:a,...o}=s,c=T(js,t),i=l.useRef(null),m=F(r,i,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(B.div,{"data-radix-scroll-area-viewport":"",...o,ref:m,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...s.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});vs.displayName=js;var L="ScrollAreaScrollbar",ve=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=T(L,s.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:c}=a,i=s.orientation==="horizontal";return l.useEffect(()=>(i?o(!0):c(!0),()=>{i?o(!1):c(!1)}),[i,o,c]),a.type==="hover"?e.jsx(Et,{...n,ref:r,forceMount:t}):a.type==="scroll"?e.jsx(Lt,{...n,ref:r,forceMount:t}):a.type==="auto"?e.jsx(ys,{...n,ref:r,forceMount:t}):a.type==="always"?e.jsx(ye,{...n,ref:r}):null});ve.displayName=L;var Et=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=T(L,s.__scopeScrollArea),[o,c]=l.useState(!1);return l.useEffect(()=>{const i=a.scrollArea;let m=0;if(i){const x=()=>{window.clearTimeout(m),c(!0)},d=()=>{m=window.setTimeout(()=>c(!1),a.scrollHideDelay)};return i.addEventListener("pointerenter",x),i.addEventListener("pointerleave",d),()=>{window.clearTimeout(m),i.removeEventListener("pointerenter",x),i.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(Y,{present:t||o,children:e.jsx(ys,{"data-state":o?"visible":"hidden",...n,ref:r})})}),Lt=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=T(L,s.__scopeScrollArea),o=s.orientation==="horizontal",c=oe(()=>m("SCROLL_END"),100),[i,m]=_t("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(i==="idle"){const x=window.setTimeout(()=>m("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(x)}},[i,a.scrollHideDelay,m]),l.useEffect(()=>{const x=a.viewport,d=o?"scrollLeft":"scrollTop";if(x){let u=x[d];const h=()=>{const v=x[d];u!==v&&(m("SCROLL"),c()),u=v};return x.addEventListener("scroll",h),()=>x.removeEventListener("scroll",h)}},[a.viewport,o,m,c]),e.jsx(Y,{present:t||i!=="hidden",children:e.jsx(ye,{"data-state":i==="hidden"?"hidden":"visible",...n,ref:r,onPointerEnter:M(s.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:M(s.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),ys=l.forwardRef((s,r)=>{const t=T(L,s.__scopeScrollArea),{forceMount:n,...a}=s,[o,c]=l.useState(!1),i=s.orientation==="horizontal",m=oe(()=>{if(t.viewport){const x=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;c(i?x:d)}},10);return H(t.viewport,m),H(t.content,m),e.jsx(Y,{present:n||o,children:e.jsx(ye,{"data-state":o?"visible":"hidden",...a,ref:r})})}),ye=l.forwardRef((s,r)=>{const{orientation:t="vertical",...n}=s,a=T(L,s.__scopeScrollArea),o=l.useRef(null),c=l.useRef(0),[i,m]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),x=Cs(i.viewport,i.content),d={...n,sizes:i,onSizesChange:m,hasThumb:x>0&&x<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:h=>c.current=h};function u(h,v){return Ot(h,c.current,i,v)}return t==="horizontal"?e.jsx(Mt,{...d,ref:r,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollLeft,v=rs(h,i,a.dir);o.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=u(h,a.dir))}}):t==="vertical"?e.jsx(It,{...d,ref:r,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollTop,v=rs(h,i);o.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=u(h))}}):null}),Mt=l.forwardRef((s,r)=>{const{sizes:t,onSizesChange:n,...a}=s,o=T(L,s.__scopeScrollArea),[c,i]=l.useState(),m=l.useRef(null),x=F(r,m,o.onScrollbarXChange);return l.useEffect(()=>{m.current&&i(getComputedStyle(m.current))},[m]),e.jsx(ws,{"data-orientation":"horizontal",...a,ref:x,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ne(t)+"px",...s.style},onThumbPointerDown:d=>s.onThumbPointerDown(d.x),onDragScroll:d=>s.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;s.onWheelScroll(h),Rs(h,u)&&d.preventDefault()}},onResize:()=>{m.current&&o.viewport&&c&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:m.current.clientWidth,paddingStart:re(c.paddingLeft),paddingEnd:re(c.paddingRight)}})}})}),It=l.forwardRef((s,r)=>{const{sizes:t,onSizesChange:n,...a}=s,o=T(L,s.__scopeScrollArea),[c,i]=l.useState(),m=l.useRef(null),x=F(r,m,o.onScrollbarYChange);return l.useEffect(()=>{m.current&&i(getComputedStyle(m.current))},[m]),e.jsx(ws,{"data-orientation":"vertical",...a,ref:x,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ne(t)+"px",...s.style},onThumbPointerDown:d=>s.onThumbPointerDown(d.y),onDragScroll:d=>s.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;s.onWheelScroll(h),Rs(h,u)&&d.preventDefault()}},onResize:()=>{m.current&&o.viewport&&c&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:m.current.clientHeight,paddingStart:re(c.paddingTop),paddingEnd:re(c.paddingBottom)}})}})}),[zt,Ns]=fs(L),ws=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:c,onThumbPointerDown:i,onThumbPositionChange:m,onDragScroll:x,onWheelScroll:d,onResize:u,...h}=s,v=T(L,t),[b,k]=l.useState(null),P=F(r,D=>k(D)),p=l.useRef(null),y=l.useRef(""),g=v.viewport,j=n.content-n.viewport,w=O(d),C=O(m),S=oe(u,10);function _(D){if(p.current){const A=D.clientX-p.current.left,E=D.clientY-p.current.top;x({x:A,y:E})}}return l.useEffect(()=>{const D=A=>{const E=A.target;(b==null?void 0:b.contains(E))&&w(A,j)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[g,b,j,w]),l.useEffect(C,[n,C]),H(b,S),H(v.content,S),e.jsx(zt,{scope:t,scrollbar:b,hasThumb:a,onThumbChange:O(o),onThumbPointerUp:O(c),onThumbPositionChange:C,onThumbPointerDown:O(i),children:e.jsx(B.div,{...h,ref:P,style:{position:"absolute",...h.style},onPointerDown:M(s.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),p.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),_(D))}),onPointerMove:M(s.onPointerMove,_),onPointerUp:M(s.onPointerUp,D=>{const A=D.target;A.hasPointerCapture(D.pointerId)&&A.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=y.current,v.viewport&&(v.viewport.style.scrollBehavior=""),p.current=null})})})}),te="ScrollAreaThumb",ks=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=Ns(te,s.__scopeScrollArea);return e.jsx(Y,{present:t||a.hasThumb,children:e.jsx(Bt,{ref:r,...n})})}),Bt=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,style:n,...a}=s,o=T(te,t),c=Ns(te,t),{onThumbPositionChange:i}=c,m=F(r,u=>c.onThumbChange(u)),x=l.useRef(void 0),d=oe(()=>{x.current&&(x.current(),x.current=void 0)},100);return l.useEffect(()=>{const u=o.viewport;if(u){const h=()=>{if(d(),!x.current){const v=Ut(u,i);x.current=v,i()}};return i(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[o.viewport,d,i]),e.jsx(B.div,{"data-state":c.hasThumb?"visible":"hidden",...a,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:M(s.onPointerDownCapture,u=>{const v=u.target.getBoundingClientRect(),b=u.clientX-v.left,k=u.clientY-v.top;c.onThumbPointerDown({x:b,y:k})}),onPointerUp:M(s.onPointerUp,c.onThumbPointerUp)})});ks.displayName=te;var Ne="ScrollAreaCorner",Ss=l.forwardRef((s,r)=>{const t=T(Ne,s.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?e.jsx(Ft,{...s,ref:r}):null});Ss.displayName=Ne;var Ft=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,...n}=s,a=T(Ne,t),[o,c]=l.useState(0),[i,m]=l.useState(0),x=!!(o&&i);return H(a.scrollbarX,()=>{var u;const d=((u=a.scrollbarX)==null?void 0:u.offsetHeight)||0;a.onCornerHeightChange(d),m(d)}),H(a.scrollbarY,()=>{var u;const d=((u=a.scrollbarY)==null?void 0:u.offsetWidth)||0;a.onCornerWidthChange(d),c(d)}),x?e.jsx(B.div,{...n,ref:r,style:{width:o,height:i,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function re(s){return s?parseInt(s,10):0}function Cs(s,r){const t=s/r;return isNaN(t)?0:t}function ne(s){const r=Cs(s.viewport,s.content),t=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,n=(s.scrollbar.size-t)*r;return Math.max(n,18)}function Ot(s,r,t,n="ltr"){const a=ne(t),o=a/2,c=r||o,i=a-c,m=t.scrollbar.paddingStart+c,x=t.scrollbar.size-t.scrollbar.paddingEnd-i,d=t.content-t.viewport,u=n==="ltr"?[0,d]:[d*-1,0];return Ds([m,x],u)(s)}function rs(s,r,t="ltr"){const n=ne(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,o=r.scrollbar.size-a,c=r.content-r.viewport,i=o-n,m=t==="ltr"?[0,c]:[c*-1,0],x=xt(s,m);return Ds([0,c],[0,i])(x)}function Ds(s,r){return t=>{if(s[0]===s[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(s[1]-s[0]);return r[0]+n*(t-s[0])}}function Rs(s,r){return s>0&&s<r}var Ut=(s,r=()=>{})=>{let t={left:s.scrollLeft,top:s.scrollTop},n=0;return function a(){const o={left:s.scrollLeft,top:s.scrollTop},c=t.left!==o.left,i=t.top!==o.top;(c||i)&&r(),t=o,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function oe(s,r){const t=O(s),n=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(n.current),[]),l.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,r)},[t,r])}function H(s,r){const t=O(r);ut(()=>{let n=0;if(s){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return a.observe(s),()=>{window.cancelAnimationFrame(n),a.unobserve(s)}}},[s,t])}var Ps=bs,$t=vs,Ht=Ss;const As=l.forwardRef(({className:s,children:r,...t},n)=>e.jsxs(Ps,{ref:n,className:se("relative overflow-hidden",s),...t,children:[e.jsx($t,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(_s,{}),e.jsx(Ht,{})]}));As.displayName=Ps.displayName;const _s=l.forwardRef(({className:s,orientation:r="vertical",...t},n)=>e.jsx(ve,{ref:n,orientation:r,className:se("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...t,children:e.jsx(ks,{className:"bg-border relative flex-1 rounded-full"})}));_s.displayName=ve.displayName;function Wt({open:s,onClose:r,teamLeader:t,members:n,missionId:a}){const[o,c]=l.useState({});l.useEffect(()=>{if(s&&n.length>0){const d={};n.forEach(u=>{console.log(`âœ… ${u.name} (${u.id}): ${u.status}`),u.status==="attended"&&(d[u.id]=!0)}),c(d)}},[s,n]);const i=d=>{c(u=>({...u,[d]:!u[d]}))},m=Object.values(o).filter(Boolean).length,x=()=>{const d=Object.entries(o).filter(([,u])=>u).map(([u])=>parseInt(u));U.post("/attendance-members",{user_ids:d,mission_id:a},{onSuccess:()=>{r()},onError:u=>{console.error("Presensi gagal:",u)}})};return e.jsx(X,{open:s,onOpenChange:r,children:e.jsxs(q,{className:"max-w-lg",children:[e.jsx(G,{children:e.jsx(is,{children:"Presensi Kehadiran Anggota"})}),e.jsxs("div",{className:"mb-4 space-y-1",children:[e.jsx(de,{htmlFor:"leader",children:"Ketua Tim"}),e.jsx(et,{id:"leader",value:t,disabled:!0,className:"border-gray-400 bg-gray-100 text-gray-900"})]}),e.jsx(de,{children:"Anggota Tim"}),e.jsx(As,{className:"mb-4 h-60 pr-2",children:n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(d=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{id:`member-${d.id}`,checked:o[d.id]||!1,onCheckedChange:()=>i(d.id)}),e.jsx(de,{htmlFor:`member-${d.id}`,children:d.name})]},d.id))}):e.jsx("p",{className:"text-sm italic text-gray-500",children:"- Tidak ada anggota -"})}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Jumlah Anggota Volunteer:"," ",e.jsx("span",{className:"font-semibold",children:n.length}),e.jsx("br",{}),"Jumlah Anggota Hadir:"," ",e.jsx("span",{className:"font-semibold",children:m})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(R,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:x,children:"Simpan"})]})]})})}function Vt({open:s,onClose:r,onConfirm:t,is_leader:n}){return e.jsx(X,{open:s,onOpenChange:r,children:e.jsxs(q,{children:[e.jsx(G,{children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Konfirmasi Pendaftaran"})}),e.jsx("div",{className:"py-4 text-gray-700",children:n?e.jsxs("p",{children:["Apakah Anda yakin ingin batal mendaftar sebagai"," ",e.jsx("strong",{children:"Ketua Tim"}),"?"]}):e.jsxs("p",{children:["Apakah Anda yakin ingin batal mendaftar sebagai"," ",e.jsx("strong",{children:"Anggota Tim"}),"?"]})}),e.jsxs(ge,{children:[e.jsx(R,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(R,{onClick:t,className:"bg-emerald-600 hover:bg-emerald-700",children:"Ya, Saya Yakin"})]})]})})}function Kt({open:s,onClose:r,onConfirm:t}){return e.jsx(X,{open:s,onOpenChange:r,children:e.jsxs(q,{children:[e.jsx(G,{children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Konfirmasi Pendaftaran"})}),e.jsx("div",{className:"py-4 text-gray-700",children:e.jsxs("p",{children:["Apakah Anda yakin ingin mendaftar sebagai"," ",e.jsx("strong",{children:"Komunitas"}),"? Jika Anda terpilih, Anda akan otomatis menjadi ketua tim."]})}),e.jsxs(ge,{children:[e.jsx(R,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(R,{onClick:t,className:"bg-emerald-600 hover:bg-emerald-700",children:"Ya, Saya Yakin"})]})]})})}function Yt({open:s,onClose:r,onConfirm:t,role:n}){const a=n==="ketua";return e.jsx(X,{open:s,onOpenChange:r,children:e.jsxs(q,{children:[e.jsx(G,{children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Konfirmasi Pendaftaran"})}),e.jsx("div",{className:"py-4 text-gray-700",children:a?e.jsxs("p",{children:["Apakah Anda yakin ingin mendaftar sebagai"," ",e.jsx("strong",{children:"Ketua Tim"}),"? Jika ketua sudah terpilih, Anda akan otomatis menjadi anggota."]}):e.jsxs("p",{children:["Apakah Anda yakin ingin bergabung sebagai"," ",e.jsx("strong",{children:"Anggota Tim"}),"?"]})}),e.jsxs(ge,{children:[e.jsx(R,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(R,{onClick:t,className:"bg-emerald-600 hover:bg-emerald-700",children:"Ya, Saya Yakin"})]})]})})}function Xt({open:s,onClose:r,missionId:t}){const[n,a]=l.useState([]),[o,c]=l.useState(""),[i,m]=l.useState(!1),[x,d]=l.useState(!1),u=g=>{const j=g.target.files;j&&h(Array.from(j))},h=g=>{const j=g.map(w=>{const S=w.type.startsWith("video/");return{file:w,preview:URL.createObjectURL(w),id:Math.random().toString(36).substr(2,9),type:S?"video":"image"}});a(w=>[...w,...j])},v=g=>{a(j=>{const w=j.find(C=>C.id===g);return w&&URL.revokeObjectURL(w.preview),j.filter(C=>C.id!==g)})},b=g=>{g.preventDefault(),m(!0)},k=g=>{g.preventDefault(),m(!1)},P=g=>{g.preventDefault(),m(!1);const j=Array.from(g.dataTransfer.files).filter(w=>w.type.startsWith("image/"));j.length>0&&h(j)},p=async()=>{if(n.length===0){alert("Pilih setidaknya satu gambar untuk diupload");return}d(!0);const g=new FormData;n.forEach(j=>{g.append("media[]",j.file)}),g.append("mission_id",t.toString()),g.append("content",o);try{await U.post("/mission/media-documentation/upload",g,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{n.forEach(j=>{URL.revokeObjectURL(j.preview)}),a([]),c(""),r()},onError:j=>{console.error("Upload failed:",j)},onFinish:()=>{d(!1)}})}catch(j){console.error("Upload error:",j),d(!1)}},y=()=>{n.forEach(g=>{URL.revokeObjectURL(g.preview)}),a([]),c(""),r()};return e.jsx(X,{open:s,onOpenChange:y,children:e.jsxs(q,{className:"max-h-[80vh] max-w-2xl overflow-y-auto",children:[e.jsx(G,{children:e.jsxs(is,{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5"}),"Upload Dokumentasi Misi"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Deskripsi Dokumentasi"}),e.jsx("textarea",{value:o,onChange:g=>c(g.target.value),placeholder:"Jelaskan tentang dokumentasi ini...",className:"w-full resize-none rounded-md border border-gray-300 p-3 focus:border-transparent focus:ring-2 focus:ring-blue-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Gambar Dokumentasi"}),e.jsxs("div",{className:`rounded-lg border-2 border-dashed p-6 text-center transition-colors ${i?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:b,onDragLeave:k,onDrop:P,children:[e.jsx(xe,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsxs("p",{className:"mb-2 text-gray-600",children:["Drag & drop gambar di sini atau"," ",e.jsxs("label",{className:"cursor-pointer text-blue-600 hover:text-blue-700",children:["pilih file",e.jsx("input",{type:"file",multiple:!0,accept:"image/jpeg,image/png,image/jpg,image/gif,video/mp4,video/quicktime,video/x-msvideo,video/x-ms-wmv",onChange:u,className:"hidden"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Maksimal 2MB per file, format: JPG, PNG, GIF"})]})]}),n.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"mb-3 text-sm font-medium text-gray-700",children:["Preview Gambar (",n.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3",children:n.map(g=>e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg border bg-gray-100",children:g.type==="image"?e.jsx("img",{src:g.preview,alt:g.file.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-4.596-2.65A1 1 0 009 9.34v5.32a1 1 0 001.156.982l4.596-1.02A1 1 0 0016 13.68v-3.36a1 1 0 00-1.248-.984z"})})})}),e.jsx("button",{onClick:()=>v(g.id),className:"absolute right-2 top-2 rounded-full bg-red-500 p-1 text-white opacity-0 transition-opacity hover:bg-red-600 group-hover:opacity-100",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx("p",{className:"mt-1 truncate text-xs text-gray-500",children:g.file.name})]},g.id))})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[e.jsx("button",{onClick:y,disabled:x,className:"rounded-md border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Batal"}),e.jsx("button",{onClick:p,disabled:x||n.length===0,className:"flex items-center gap-2 rounded-md bg-blue-600 px-6 py-2 text-white hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4"}),"Upload (",n.length,")"]})})]})]})]})})}const qt=({children:s,className:r=""})=>e.jsx("div",{className:`rounded-lg border bg-white shadow-sm ${r}`,children:s}),Gt=({children:s})=>e.jsx("div",{className:"p-6 pb-4",children:s}),Jt=({children:s,className:r=""})=>e.jsx("h3",{className:`text-lg font-semibold ${r}`,children:s}),Qt=({children:s})=>e.jsx("div",{className:"p-6 pt-0",children:s}),Ts=Gs.forwardRef(({className:s="",...r},t)=>e.jsx("textarea",{className:`w-full resize-none rounded-md border border-gray-300 px-3 py-2 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 ${s}`,ref:t,...r}));Ts.displayName="Textarea";const as=({children:s,variant:r="default",size:t="md",className:n="",...a})=>{const o="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",c={default:"bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-emerald-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-emerald-500"},i={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return e.jsx("button",{className:`${o} ${c[r]} ${i[t]} ${n}`,...a,children:s})},Zt=({reportId:s})=>{const{data:r,setData:t,post:n,processing:a,errors:o,reset:c}=ns({comment:"",media:null,report_id:s}),[i,m]=l.useState(null),x=l.useRef(null);l.useEffect(()=>{if(r.media)if(r.media.type.startsWith("image/")){const b=new FileReader;b.onloadend=()=>m(b.result),b.readAsDataURL(r.media)}else m(null);else m(null)},[r.media]);const d=b=>{var k;t("media",((k=b.target.files)==null?void 0:k[0])||null)},u=()=>{t("media",null),x.current&&(x.current.value="")},h=b=>{b.preventDefault(),n(route("comments.store"),{forceFormData:!0,onSuccess:()=>{c()},preserveScroll:!0})},v=b=>{if(b===0)return"0 Bytes";const k=1024,P=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(b)/Math.log(k));return parseFloat((b/Math.pow(k,p)).toFixed(2))+" "+P[p]};return e.jsxs(qt,{children:[e.jsx(Gt,{children:e.jsxs(Jt,{className:"flex items-center",children:[e.jsx(Nt,{size:20,className:"mr-2"}),"Tambah Komentar"]})}),e.jsx(Qt,{children:e.jsxs("form",{onSubmit:h,children:[e.jsx(Ts,{placeholder:"Tulis komentar Anda...",value:r.comment,onChange:b=>t("comment",b.target.value),rows:3,className:"mb-3"}),o.comment&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.comment}),o.media&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.media}),r.media&&e.jsx("div",{className:"mb-4 mt-2",children:i?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:i,alt:"Preview",className:"h-auto max-h-48 max-w-full rounded-lg border border-gray-200 object-contain"}),e.jsx("button",{type:"button",onClick:u,className:"absolute -right-2 -top-2 rounded-full bg-red-500 p-1 text-white hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500",children:e.jsx(ue,{size:14})})]}):e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex min-w-0 items-center space-x-3",children:[e.jsx(bt,{size:24,className:"flex-shrink-0 text-blue-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:r.media.name}),e.jsx("p",{className:"text-sm text-gray-500",children:v(r.media.size)})]})]}),e.jsx("button",{type:"button",onClick:u,className:"flex-shrink-0 rounded p-1 text-red-500 hover:text-red-700 focus:outline-none",children:e.jsx(ue,{size:16})})]})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs(as,{type:"button",variant:"outline",onClick:()=>{var b;return(b=x.current)==null?void 0:b.click()},children:[e.jsx(xe,{size:16,className:"mr-2"}),"Lampirkan File"]}),e.jsx("input",{type:"file",ref:x,onChange:d,accept:"image/*,video/*",className:"hidden"}),e.jsx(as,{type:"submit",disabled:a,children:a?"Mengirim...":"Kirim Komentar"})]})]})})]})},pe=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),er=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}),sr=(s="")=>s.split(" ").map(r=>r[0]).join("").toUpperCase().substring(0,2),tr=({isOpen:s,onClose:r,onSubmit:t,loading:n})=>{const[a,o]=l.useState(""),[c,i]=l.useState(""),m=[25e3,5e4,1e5,25e4,5e5,1e6],x=()=>{const h=parseInt(a.replace(/\D/g,""));if(!h||h<1e4){i("Minimal donasi adalah Rp 10.000");return}i(""),t(h)},d=h=>{const v=h.replace(/\D/g,"");o(v),i("")},u=h=>h?parseInt(h.replace(/\D/g,"")).toLocaleString("id-ID"):"";return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"flex w-full max-w-3xl scale-100 transform overflow-hidden rounded-2xl bg-white shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"hidden bg-gray-200 md:block md:w-1/2",children:e.jsx("img",{src:"/donasi.jpg",alt:"Donation context",className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex w-full flex-col p-8 md:w-1/2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"flex items-center text-2xl font-bold text-gray-800",children:[e.jsx(ft,{className:"mr-3 h-6 w-6 text-emerald-600"}),"Jumlah Donasi"]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 transform font-medium text-gray-500",children:"Rp"}),e.jsx("input",{type:"text",value:u(a),onChange:h=>d(h.target.value),className:"w-full rounded-lg border border-gray-300 py-3 pl-12 pr-4 text-lg text-gray-800 transition-colors focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500",placeholder:"0",disabled:n})]}),c&&e.jsx("p",{className:"mb-4 text-sm text-red-600",children:c}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("p",{className:"mb-3 flex items-center text-sm font-medium text-gray-600",children:[e.jsx("span",{className:"mr-2 h-1.5 w-1.5 rounded-full bg-emerald-500"}),"Pilihan Cepat:"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.map(h=>e.jsx("button",{type:"button",onClick:()=>{o(h.toString()),i("")},className:`rounded-lg border px-4 py-2 text-sm font-medium transition-all duration-200 ${parseInt(a)===h?"border-emerald-600 bg-emerald-600 text-white":"border-gray-300 bg-white hover:border-emerald-400 hover:bg-emerald-50"}`,disabled:n,children:pe(h).replace(/\s*Rp/g,"")},h))})]})]}),e.jsxs("div",{className:"mt-auto space-y-3",children:[e.jsx(R,{onClick:x,disabled:n||!a,className:"h-auto w-full rounded-lg bg-emerald-600 py-3 text-base font-semibold hover:bg-emerald-700",children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-3 h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Memproses..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:"Donasi Sekarang"})]})}),e.jsx(R,{type:"button",variant:"outline",onClick:r,disabled:n,className:"h-auto w-full rounded-lg border-gray-300 py-3 font-medium hover:bg-gray-100",children:"Batal"}),e.jsxs("p",{className:"pt-2 text-center text-xs text-gray-500",children:[e.jsx("span",{className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full bg-green-500"}),"Donasi Anda akan langsung disalurkan untuk penanganan"]})]})]})]})}):null};function rr({donations:s,reportId:r}){const[t,n]=l.useState(!1),[a,o]=l.useState(!1),[c,i]=l.useState(!1),{props:m}=os(),{midtrans_client_key:x,midtrans_is_production:d}=m,{totalAmount:u,totalDonors:h}=l.useMemo(()=>({totalAmount:s.reduce((y,g)=>y+g.amount,0),totalDonors:s.length}),[s]),v=()=>{const p=document.querySelector('meta[name="csrf-token"]');return p&&p.getAttribute("content")||""},b=(p,y)=>{switch(p){case"report.donate":return`/donate/report/${y}`;case"payment.success":return`/api/payment-success/${y}`;default:return""}},k=async(p,y)=>{console.log(`Mengirim konfirmasi untuk ID Donasi: ${p}`),console.log("Payment result data:",y);try{const g=typeof route<"u"?route("payment.success",p):b("payment.success",p),j=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":v()},body:JSON.stringify({donation_id:p,payment_data:y||{},status:"success"})});if(!j.ok){const C=await j.text();console.error("Payment confirmation error response:",C);let S;try{S=JSON.parse(C)}catch{S={message:`Server error: ${j.status} ${j.statusText}`}}throw new Error(S.message||"Gagal mengkonfirmasi pembayaran di server.")}const w=await j.json();return console.log("Konfirmasi pembayaran berhasil dikirim ke server:",w),w}catch(g){throw console.error("Gagal mengirim konfirmasi pembayaran:",g),g}},P=async p=>{var y;i(!0);try{const g=await fetch(route("donate.report",r),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.getAttribute("content"))||"",Accept:"application/json"},body:JSON.stringify({amount:p,report_id:r})}),j=await g.json();if(g.ok&&j){const w=j.donation_id,C=j.snap_token||j;o(!1),i(!1),window.snap.pay(C,{onSuccess:async function(S){console.log("Payment success:",S),console.log("Donation ID:",w);try{await k(w,S),console.log("handleSuccessPayment completed successfully"),window.location.reload()}catch(_){console.error("Error in handleSuccessPayment:",_),window.location.reload()}},onPending:function(S){console.log("Payment pending:",S),window.location.reload()},onError:function(S){console.log("Payment error:",S),alert("Pembayaran gagal. Halaman akan dimuat ulang."),U.reload()},onClose:function(){console.log("Payment popup closed")}})}else throw new Error(j.message||"Gagal memproses donasi")}catch(g){i(!1),console.error("Error submitting donation:",g),alert("Terjadi kesalahan. Silakan coba lagi.")}};return e.jsxs(e.Fragment,{children:[e.jsx(Js,{children:e.jsx("script",{src:d?"https://app.midtrans.com/snap/snap.js":"https://app.sandbox.midtrans.com/snap/snap.js","data-client-key":x})}),e.jsx(Z,{className:"bg-gradient-to-r from-emerald-50 to-green-50",children:e.jsx(ee,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(he,{className:"mx-auto mb-4 h-12 w-12 text-emerald-600"}),e.jsx("h3",{className:"mb-2 text-xl font-semibold",children:"Donasi untuk Penanganan"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Bantu penanganan masalah ini dengan memberikan donasi"}),e.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg bg-white/70 p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-center",children:[e.jsx(wt,{className:"mr-2 h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Donasi"})]}),e.jsx("p",{className:"text-lg font-bold text-emerald-700",children:pe(u)})]}),e.jsxs("div",{className:"rounded-lg bg-white/70 p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-center",children:[e.jsx(ts,{className:"mr-2 h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Donatur"})]}),e.jsxs("p",{className:"text-lg font-bold text-emerald-700",children:[h," Orang"]})]})]}),h>0&&e.jsxs("div",{children:[e.jsxs("button",{className:"mb-4 flex w-full items-center justify-center text-sm text-emerald-700 transition-colors hover:text-emerald-800",onClick:()=>n(!t),children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),t?"Sembunyikan":"Lihat"," Daftar Donatur",t?e.jsx(pt,{className:"ml-2 h-4 w-4"}):e.jsx(gt,{className:"ml-2 h-4 w-4"})]}),t&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("div",{className:"space-y-3",children:s.map(p=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white/70 p-3 text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:p.user.profile_url?e.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:`/storage/${p.user.profile_url}`,alt:p.user.name}):e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100",children:e.jsx("span",{className:"text-xs font-medium text-emerald-700",children:sr(p.user.name)})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:p.user.name}),e.jsx("p",{className:"text-xs text-gray-500",children:er(p.created_at)})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-emerald-700",children:pe(p.amount)})})]},p.id))})})})]}),e.jsxs(R,{size:"lg",className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:()=>o(!0),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Donasi Sekarang"]})]})})}),e.jsx(tr,{isOpen:a,onClose:()=>o(!1),onSubmit:P,loading:c})]})}const ar=({report:s,onBack:r,myParticipation:t,confirmedLeader:n,comments:a,volunteers:o,volunteerCounts:c,user:i,your_vote:m,donations:x})=>{var _e,Te,Ee,Le,Me,Ie,ze,Be,Fe,Oe,Ue,$e,He,We,Ve,Ke,Ye;const[d,u]=l.useState(m==="upvote"),[h,v]=l.useState(m==="dislike"),[b,k]=l.useState(s),[P,p]=l.useState(null),y=n??[];console.log(n);const{data:g,setData:j,post:w,processing:C,reset:S}=ns({comment:"",report_id:s.id,reply_id:null}),[_,D]=l.useState(!1),A=4,[E,we]=l.useState(!1),ke=3,Es=(_e=s.mission)==null?void 0:_e.documentation.reduce((f,N)=>(f[N.content]||(f[N.content]=[]),f[N.content].push(N),f),{}),Q=Object.entries(Es||{}),Ls=E?Q??[]:(Q??[]).slice(0,ke),Ms=(Q??[]).length>ke,Is=_?a??[]:(a??[]).slice(0,A),zs=a.length>A,[Bs,Se]=l.useState(!1),[Fs,le]=l.useState(!1),[Os,Ce]=l.useState(!1),[Us,ie]=l.useState(!1),[$s,ce]=l.useState(!1),[De,Hs]=l.useState("anggota");console.log("donasi masuk:",x),console.log("myParticipation:",t),console.log("ini komen",a);const Re=f=>{Hs(f),ie(!0)},Ws=()=>{ce(!0)},Vs=()=>{var f;U.delete(route("volunteer.cancel",(f=s.mission)==null?void 0:f.id),{preserveScroll:!0,onSuccess:()=>{Qe.success("Pendaftaran berhasil dibatalkan"),le(!1)},onError:()=>{Qe.error("Gagal membatalkan pendaftaran")}})},Pe=async f=>{console.log("Handle Vote Triggered:",f);try{const N=await Qs.post(`/reports/${s.id}/vote`,{vote_type:f}),{upvotes_count:I,dislikes_count:W,your_vote:$}=N.data;k(qs=>({...qs,upvotes_count:I,dislikes_count:W})),u($==="upvote"),v($==="dislike")}catch(N){console.error(N),alert("Vote gagal")}},Ks=()=>{var N;ie(!1);const f=De==="ketua";U.post(`/join-missions/${(N=s.mission)==null?void 0:N.id}`,{is_leader:f},{onSuccess:()=>{console.log("Berhasil mendaftar"),console.log("myParticipation:",t)},onError:I=>{console.error(I)}})},Ys=()=>{var f;ce(!1),U.post(`/join-missions/${(f=s.mission)==null?void 0:f.id}`,{is_leader:!0},{onSuccess:()=>{console.log("Berhasil mendaftar sebagai komunitas"),console.log("myParticipation:",t)},onError:N=>{console.error(N)}})},Xs=()=>{w(route("comments.store"),{onSuccess:()=>{S("comment","reply_id"),p(null)},preserveScroll:!0})},Ae=f=>{try{return V(f)}catch{return f}};return e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6 px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{variant:"ghost",onClick:r,className:"text-gray-600 hover:text-emerald-600",children:[e.jsx(jt,{size:20,className:"mr-2"}),"Kembali ke Daftar Laporan"]}),e.jsxs("div",{className:"space-x-1 text-sm text-gray-500",children:[e.jsx("span",{className:"cursor-pointer hover:underline",children:"Home"}),e.jsx("span",{className:"cursor-pointer hover:underline",children:"/ Laporan"})," ","/",e.jsx("span",{className:"font-medium text-gray-700",children:"Detail"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsx(Z,{children:e.jsxs(ee,{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between md:flex-row",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[e.jsx(K,{className:"border border-gray-400 bg-white text-gray-700",children:tt(s.category)}),e.jsx(K,{className:lt(s.status),children:ot(s.status)}),s.mission&&e.jsx(K,{className:"bg-indigo-100 text-indigo-700",children:"Ada Misi"})]}),e.jsx("h1",{className:"mb-4 text-3xl font-bold text-gray-900",children:s.title}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{size:16,className:"mr-2"}),e.jsxs("span",{children:["Dilaporkan oleh:"," ",(Te=s.reporter)==null?void 0:Te.name]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{size:16,className:"mr-2"}),e.jsx("span",{children:V(s.created_at)})]}),e.jsxs("a",{href:`https://www.google.com/maps?q=${s.latitude},${s.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"flex cursor-pointer items-start text-emerald-600 hover:underline md:col-span-2",children:[e.jsx(St,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:[s.latitude," -"," ",s.longitude]})]}),e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(vt,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:[(Ee=s.district)==null?void 0:Ee.name,","," ",(Le=s.city)==null?void 0:Le.name,","," ",(Me=s.province)==null?void 0:Me.name]})]})]})]})," "]}),e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Media Pendukung"}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2",children:(Ie=s.media)==null?void 0:Ie.map((f,N)=>{var I;return e.jsx("div",{className:"aspect-video overflow-hidden rounded-lg bg-black",children:(I=f.media_type)!=null&&I.startsWith("video")?e.jsx("video",{controls:!0,className:"h-full w-full object-contain",src:`/storage/${f.media_url}`}):e.jsx(ss,{src:`/storage/${f.media_url}`,alt:`Media laporan ${N+1}`})},N)})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Lokasi Detail"}),e.jsx("p",{className:"leading-relaxed text-gray-700",children:s.address})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Deskripsi Laporan"}),e.jsx("p",{className:"leading-relaxed text-gray-700",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-200 py-4",children:[e.jsxs("button",{onClick:()=>Pe("upvote"),className:`flex items-center rounded-md border px-3 py-2 transition-colors ${d?"border-emerald-600 bg-emerald-600 text-white hover:bg-emerald-700":"border-gray-300 text-gray-600 hover:bg-gray-100"} `,children:[e.jsx(rt,{size:16,className:"mr-2"}),b.upvotes_count]}),e.jsxs("button",{onClick:()=>Pe("dislike"),className:`flex items-center rounded-md border px-3 py-2 transition-colors ${h?"border-red-600 bg-red-600 text-white hover:bg-red-700":"border-gray-300 text-gray-600 hover:bg-gray-100"} `,children:[e.jsx(yt,{size:16,className:"mr-2"}),b.dislikes_count]})]}),s.status==="completed"&&e.jsxs("div",{className:"mt-6 rounded-xl border-2 border-emerald-200 bg-gradient-to-br from-emerald-50 to-green-50 p-6 shadow-lg",children:[e.jsx("div",{className:"mb-4 flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-800",children:"Laporan dan Misi Terkait Selesai!"}),e.jsx("p",{className:"text-sm font-medium text-emerald-600",children:"Detail penyelesaian"})]})}),e.jsxs("div",{className:"mb-4 inline-flex items-center rounded-full border border-emerald-300 bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-800",children:[e.jsx("svg",{className:"mr-1 h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"STATUS: COMPLETED"]}),e.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-white/70 p-4",children:[e.jsxs("h4",{className:"mb-3 flex items-center font-semibold text-emerald-800",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Laporan Akhir:"]}),e.jsx("div",{className:"prose-sm prose max-w-none",children:e.jsx("p",{className:"text-justify leading-relaxed text-gray-700",children:s.completion_details||e.jsx("span",{className:"italic text-gray-500",children:"Tidak ada detail laporan yang disertakan"})})})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2 text-emerald-600",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ‰"}),e.jsx("span",{className:"text-sm font-medium",children:"Terima kasih atas kontribusi pihak yang terlibat!"})]})})]})]})}),s.mission&&e.jsxs(Z,{children:[e.jsx(Ze,{children:e.jsx(es,{className:"text-emerald-700",children:"Misi Terkait"})}),e.jsxs(ee,{children:[e.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:e.jsx(K,{className:nt((ze=s.mission)==null?void 0:ze.status),children:at((Be=s.mission)==null?void 0:Be.status)})}),e.jsx("h1",{className:"mb-4 text-3xl font-bold text-gray-900",children:(Fe=s.mission)==null?void 0:Fe.title}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{size:16,className:"mr-2"}),e.jsxs("span",{children:["Diverifikasi oleh:"," ",(Ue=(Oe=s.mission)==null?void 0:Oe.creator)==null?void 0:Ue.name]})]}),e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(me,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:["Misi dibuat:"," ",V(($e=s.mission)==null?void 0:$e.created_at)]})]}),e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(me,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:["Pelaksanaan:"," ",V((He=s.mission)==null?void 0:He.scheduled_date)]})]})]}),e.jsxs("div",{className:"my-6",children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Deskripsi Misi"}),e.jsx("p",{className:"leading-relaxed text-gray-700",children:s.mission.description})]}),s.status==="under-authority"?e.jsxs("div",{className:"my-6",children:[e.jsx(K,{className:"mb-3 bg-yellow-300 text-lg font-semibold text-black",children:"Misi Khusus Pihak Berwenang"}),e.jsx("p",{className:"text-gray-700",children:"Misi ini ditangani oleh otoritas terkait dan tidak terbuka untuk partisipasi umum."})]}):(We=s.mission)!=null&&We.volunteers?e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100",children:e.jsx("svg",{className:"h-4 w-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Ketua Tim"})]}),y.length>0?e.jsx("div",{className:"space-y-2",children:y.map(f=>e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-emerald-50 px-3 py-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-emerald-200 text-xs font-medium text-emerald-700",children:f.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-700",children:f.name})]},f.id))}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-dashed border-gray-300"}),e.jsx("span",{className:"text-sm",children:"Belum ada ketua tim"})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100",children:e.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Anggota Tim"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:c||0}),e.jsx("span",{className:"ml-1 text-sm text-gray-600",children:"orang"})]}),e.jsx("div",{className:"rounded-full bg-blue-50 px-3 py-1",children:e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Bergabung"})})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[t==null&&e.jsx(e.Fragment,{children:(i==null?void 0:i.role)==="community"?e.jsx(R,{variant:"outline",className:"bg-yellow-400 text-black hover:bg-black hover:text-yellow-400",onClick:Ws,children:"Daftar sebagai Komunitas"}):e.jsxs(e.Fragment,{children:[e.jsx(R,{onClick:()=>Re("ketua"),children:"Ikut sebagai Ketua Tim"}),e.jsx(R,{variant:"outline",onClick:()=>Re("anggota"),children:"Ikut sebagai Anggota"})]})}),t&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Kamu sudah mendaftar sebagai"," ",e.jsxs("strong",{children:[t.pivot.is_leader?"Ketua":"Anggota"," "]}),"(",t.pivot.participation_status,")"]}),e.jsx(Yt,{open:Us,onClose:()=>ie(!1),onConfirm:Ks,role:De}),e.jsx(Kt,{open:$s,onClose:()=>ce(!1),onConfirm:Ys}),t&&["pending","confirmed"].includes(t.pivot.participation_status)&&e.jsxs(e.Fragment,{children:[e.jsx(R,{onClick:()=>le(!0),variant:"destructive",children:"Batal Daftar"}),e.jsx(Vt,{open:Fs,onClose:()=>le(!1),onConfirm:Vs,is_leader:t.pivot.is_leader})]})]}),t&&t.pivot.participation_status!=="cancelled"&&t.pivot.participation_status!=="pending"&&t.pivot.is_leader?e.jsx(R,{onClick:()=>Se(!0),className:"my-2 bg-sky-600 hover:bg-sky-700",children:"Presensi Kehadiran"}):null,e.jsx(Wt,{open:Bs,onClose:()=>Se(!1),missionId:(Ve=s.mission)==null?void 0:Ve.id,teamLeader:n&&n.length>0?n.map(f=>f.name).join(", "):"Belum ditentukan",members:o})]}):null,((Ke=s.mission)==null?void 0:Ke.documentation)&&e.jsxs("div",{children:[s.status!=="under-authority"&&e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Dokumentasi Misi"}),t&&t.pivot.is_leader&&["confirmed","attended"].includes(t.pivot.participation_status)?e.jsxs(e.Fragment,{children:[e.jsx(R,{onClick:()=>Ce(!0),children:"Upload Dokumentasi"}),e.jsx(Xt,{open:Os,onClose:()=>Ce(!1),missionId:(Ye=s.mission)==null?void 0:Ye.id})]}):e.jsx("p",{className:"text-sm italic text-gray-500",children:"Dokumentasi hanya dapat diunggah oleh ketua tim."}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`space-y-6 ${E?"max-h-96 overflow-y-auto pr-2":""}`,children:Ls.map(([f,N],I)=>e.jsxs("div",{className:"my-2 rounded-xl border border-gray-300 bg-white p-6 shadow-sm transition-shadow duration-200 hover:shadow-md",children:[e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:N.map((W,$)=>e.jsx("div",{className:"space-y-2",children:W.media_type==="video"?e.jsxs("div",{className:"group relative",children:[e.jsx("video",{src:`/storage/${W.media_url}`,controls:!0,preload:"metadata",className:"aspect-video w-full rounded-lg border border-gray-200 shadow-sm"}),e.jsx("div",{className:"absolute right-2 top-2 rounded bg-black bg-opacity-50 px-2 py-1 text-xs text-white",children:"Video"})]}):e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"mx-auto w-full max-w-[200px]",children:e.jsx(ss,{src:`/storage/${W.media_url}`,alt:`Media dokumentasi ${$+1}`,className:"h-auto w-full rounded-lg border border-gray-200 object-cover shadow-sm transition-shadow duration-200 hover:shadow-md"})}),e.jsxs("div",{className:"absolute right-2 top-2 rounded bg-black bg-opacity-50 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:[$+1,"/",N.length]})]})},$))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-start space-x-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-2 text-sm font-semibold text-gray-800",children:"Keterangan Dokumentasi"}),e.jsx("p",{className:"text-sm leading-relaxed text-gray-700",children:f})]})}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-emerald-100",children:e.jsx("span",{className:"text-xs font-medium text-emerald-700",children:N[0].uploader.name[0]})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:N[0].uploader.name})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:V(N[0].created_at)})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"rounded-full bg-gray-50 px-2 py-1 text-xs text-gray-500",children:[N.length," ","file",N.length>1?"s":""]})})]})]})]},I))}),Ms&&e.jsx("div",{className:"flex justify-center border-t border-gray-100 pt-4",children:e.jsx("button",{onClick:()=>we(!E),className:"inline-flex items-center rounded-lg px-4 py-2 text-sm font-medium text-emerald-600 transition-colors duration-200 hover:bg-emerald-50 hover:text-emerald-700",children:E?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Lihat Sedikit"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Lihat Semua (",Q.length," ","dokumentasi)"]})})})]})]})]})]}),s.is_donation?e.jsx(e.Fragment,{children:e.jsx(rr,{donations:x,reportId:s.id})}):null]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Z,{children:[e.jsx(Ze,{children:e.jsxs(es,{className:"flex items-center",children:[e.jsx(Ct,{size:20,className:"mr-2"}),"Diskusi (",a.length," komentar)"]})}),e.jsx(ee,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`space-y-4 ${_?"max-h-96 overflow-y-auto pr-2":""}`,children:Is.map(f=>e.jsx("div",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-sm transition-shadow duration-200 hover:shadow-md",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(qe,{className:"h-10 w-10 ring-2 ring-gray-100",children:[e.jsx(Ge,{src:`/storage/${f.user.profile_url}`,className:"object-cover"}),e.jsx(Je,{className:"bg-emerald-100 font-semibold text-emerald-700",children:f.user.name[0]})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-3 flex items-center space-x-3",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:f.user.name}),e.jsx("span",{className:"rounded-full bg-gray-50 px-2 py-1 text-xs text-gray-500",children:Ae(f.created_at)})]}),e.jsx("p",{className:"mb-4 leading-relaxed text-gray-700",children:f.comment}),f.media_url&&e.jsx("div",{className:"mb-4",children:f.media_type==="video"?e.jsx("video",{src:`/storage/${f.media_url}`,controls:!0,preload:"metadata",className:"aspect-video w-full max-w-md rounded-lg border border-gray-200 shadow-sm"}):e.jsx("img",{src:`/storage/${f.media_url}`,alt:"Media untuk komentar",className:"max-h-64 w-auto rounded-lg border border-gray-200 object-cover shadow-sm"})}),f.replies&&f.replies.length>0&&e.jsx("div",{className:"ml-2 mt-4 space-y-3 border-l-2 border-emerald-100 pl-4",children:f.replies.map(N=>e.jsxs("div",{className:"flex space-x-3 rounded-lg bg-gray-50 p-3",children:[e.jsxs(qe,{className:"h-7 w-7 ring-1 ring-gray-200",children:[e.jsx(Ge,{src:`/storage/${N.user.profile_url}`,className:"object-cover"}),e.jsx(Je,{className:"bg-emerald-50 text-xs font-medium text-emerald-600",children:N.user.name[0]})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.user.name}),e.jsx("span",{className:"text-xs text-gray-500",children:Ae(N.created_at)})]}),e.jsx("p",{className:"text-sm leading-relaxed text-gray-700",children:N.comment})]})]},N.id))}),e.jsxs("button",{type:"button",onClick:()=>{P===f.id?p(null):(p(f.id),j({...g,reply_id:f.id,comment:""}))},className:"group mt-3 inline-flex items-center text-sm font-medium text-emerald-600 transition-colors duration-200 hover:text-emerald-700",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Balas"]}),P===f.id&&e.jsxs("div",{className:"mt-4 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsx(st,{rows:3,placeholder:`Balas komentar ${f.user.name}...`,value:g.comment,onChange:N=>j("comment",N.target.value),className:"resize-none border-gray-300 focus:border-emerald-500 focus:ring-emerald-500"}),e.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[e.jsx(R,{size:"sm",variant:"outline",onClick:()=>p(null),className:"text-gray-600 hover:text-gray-700",children:"Batal"}),e.jsx(R,{size:"sm",onClick:Xs,disabled:C||!g.comment.trim(),className:"bg-emerald-600 text-white shadow-sm hover:bg-emerald-700",children:C?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Mengirim..."})]}):"Kirim Balasan"})]})]})]})]})},f.id))}),zs&&e.jsx("div",{className:"flex justify-center border-t border-gray-100 pt-4",children:e.jsx("button",{onClick:()=>D(!_),className:"inline-flex items-center rounded-lg px-4 py-2 text-sm font-medium text-emerald-600 transition-colors duration-200 hover:bg-emerald-50 hover:text-emerald-700",children:_?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Lihat Sedikit"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Lihat Semua (",a.length," komentar)"]})})})]})})]}),e.jsx(Zt,{reportId:s.id})]})]})]})},Ar=()=>{var u;const{props:s}=os(),r=((u=s.auth)==null?void 0:u.user)??null,t=s.report,n=s.myParticipation,a=s.confirmedLeader,o=s.comments,c=s.volunteers,i=s.volunteerCounts,m=s.your_vote,x=s.donations,d=()=>{U.visit(route("report"))};return e.jsx(Zs,{currentPage:"report/{id}",children:e.jsx(ar,{report:t,user:r,onBack:d,your_vote:m,comments:o,confirmedLeader:a??[],myParticipation:n,volunteers:c,volunteerCounts:i,donations:x})})};export{Ar as default};
