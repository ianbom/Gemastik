import{r as l,j as e,S as B,J as os,Q as Zs,x as ls,R as et,a as st}from"./app-DqvPgPLX.js";import{X as he,U as Ge,A as Xe,a as qe,b as Je,u as Qe,C as tt}from"./CitizenLayout-CZTR47zY.js";import{I as rt,B as D}from"./input-_-d2rHVp.js";import{C as ee,a as se,b as Ze,c as es}from"./card-f358nuNf.js";import{T as at}from"./textarea-CC7NFrUF.js";import{g as nt}from"./categoryReportLabel-Bo3G_xyd.js";import{f as Z,b as ot}from"./formatDate-UvSedfNW.js";import{g as lt,a as it}from"./missionStatusLabel-hBdcFGI7.js";import{g as ct,a as dt}from"./reportStatusLabel-CeJ63OXr.js";import{B as K,I as ss}from"./ImageWithPopup-BpRtKiIN.js";import{P as O,u as F,c as te}from"./index-28FC01iy.js";import{c as is,P as Y,u as mt,a as M,b as ut,C as ht,d as xt,e as U,f as pt,H as xe}from"./Combination-bzKAMG6s.js";import{u as gt,c as ft,C as bt,a as jt}from"./index-DCNyB5w5.js";import{D as G,a as X,b as q,c as cs,e as fe,G as vt}from"./dialog-DLRsuT6r.js";import{L as me}from"./label-BD41T5Mp.js";import{c as J}from"./createLucideIcon-9_-YZXNr.js";import{U as pe,F as yt}from"./upload-BILbDJFA.js";import{U as ts}from"./users-C4kToFlf.js";import{A as Nt}from"./arrow-left-eTNxQMZi.js";import{C as ue}from"./calendar-CqPN-hqJ.js";import{M as wt}from"./map-pin-BcgFq_I_.js";import{T as kt,a as Ct}from"./thumbs-up-DyrjhK9X.js";import"./index-DYnLF9d4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=J("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=J("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=J("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=J("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var ne="Checkbox",[At,_r]=is(ne),[_t,be]=At(ne);function Tt(s){const{__scopeCheckbox:r,checked:t,children:n,defaultChecked:a,disabled:o,form:d,name:i,onCheckedChange:u,required:x,value:c="on",internal_do_not_use_render:h}=s,[m,v]=mt({prop:t,defaultProp:a??!1,onChange:u,caller:ne}),[b,k]=l.useState(null),[P,f]=l.useState(null),y=l.useRef(!1),g=b?!!d||!!b.closest("form"):!0,j={checked:m,disabled:o,setChecked:v,control:b,setControl:k,name:i,form:d,value:c,hasConsumerStoppedPropagationRef:y,required:x,defaultChecked:z(a)?!1:a,isFormControl:g,bubbleInput:P,setBubbleInput:f};return e.jsx(_t,{scope:r,...j,children:Et(h)?h(j):n})}var ds="CheckboxTrigger",ms=l.forwardRef(({__scopeCheckbox:s,onKeyDown:r,onClick:t,...n},a)=>{const{control:o,value:d,disabled:i,checked:u,required:x,setControl:c,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:v,bubbleInput:b}=be(ds,s),k=F(a,c),P=l.useRef(u);return l.useEffect(()=>{const f=o==null?void 0:o.form;if(f){const y=()=>h(P.current);return f.addEventListener("reset",y),()=>f.removeEventListener("reset",y)}},[o,h]),e.jsx(O.button,{type:"button",role:"checkbox","aria-checked":z(u)?"mixed":u,"aria-required":x,"data-state":gs(u),"data-disabled":i?"":void 0,disabled:i,value:d,...n,ref:k,onKeyDown:M(r,f=>{f.key==="Enter"&&f.preventDefault()}),onClick:M(t,f=>{h(y=>z(y)?!0:!y),b&&v&&(m.current=f.isPropagationStopped(),m.current||f.stopPropagation())})})});ms.displayName=ds;var je=l.forwardRef((s,r)=>{const{__scopeCheckbox:t,name:n,checked:a,defaultChecked:o,required:d,disabled:i,value:u,onCheckedChange:x,form:c,...h}=s;return e.jsx(Tt,{__scopeCheckbox:t,checked:a,defaultChecked:o,disabled:i,required:d,onCheckedChange:x,name:n,form:c,value:u,internal_do_not_use_render:({isFormControl:m})=>e.jsxs(e.Fragment,{children:[e.jsx(ms,{...h,ref:r,__scopeCheckbox:t}),m&&e.jsx(ps,{__scopeCheckbox:t})]})})});je.displayName=ne;var us="CheckboxIndicator",hs=l.forwardRef((s,r)=>{const{__scopeCheckbox:t,forceMount:n,...a}=s,o=be(us,t);return e.jsx(Y,{present:n||z(o.checked)||o.checked===!0,children:e.jsx(O.span,{"data-state":gs(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...s.style}})})});hs.displayName=us;var xs="CheckboxBubbleInput",ps=l.forwardRef(({__scopeCheckbox:s,...r},t)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:d,required:i,disabled:u,name:x,value:c,form:h,bubbleInput:m,setBubbleInput:v}=be(xs,s),b=F(t,v),k=gt(o),P=ut(n);l.useEffect(()=>{const y=m;if(!y)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set,R=!a.current;if(k!==o&&w){const S=new Event("click",{bubbles:R});y.indeterminate=z(o),w.call(y,z(o)?!1:o),y.dispatchEvent(S)}},[m,k,o,a]);const f=l.useRef(z(o)?!1:o);return e.jsx(O.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??f.current,required:i,disabled:u,name:x,value:c,form:h,...r,tabIndex:-1,ref:b,style:{...r.style,...P,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ps.displayName=xs;function Et(s){return typeof s=="function"}function z(s){return s==="indeterminate"}function gs(s){return z(s)?"indeterminate":s?"checked":"unchecked"}const fs=l.forwardRef(({className:s,...r},t)=>e.jsx(je,{ref:t,className:te("border-primary ring-offset-background focus-visible:ring-ring data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground peer h-4 w-4 shrink-0 rounded-sm border focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:e.jsx(hs,{className:te("flex items-center justify-center text-current"),children:e.jsx(ht,{className:"h-4 w-4"})})}));fs.displayName=je.displayName;function Lt(s,r){return l.useReducer((t,n)=>r[t][n]??t,s)}var ve="ScrollArea",[bs,Tr]=is(ve),[Mt,_]=bs(ve),js=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,type:n="hover",dir:a,scrollHideDelay:o=600,...d}=s,[i,u]=l.useState(null),[x,c]=l.useState(null),[h,m]=l.useState(null),[v,b]=l.useState(null),[k,P]=l.useState(null),[f,y]=l.useState(0),[g,j]=l.useState(0),[w,R]=l.useState(!1),[S,E]=l.useState(!1),C=F(r,L=>u(L)),A=xt(a);return e.jsx(Mt,{scope:t,type:n,dir:A,scrollHideDelay:o,scrollArea:i,viewport:x,onViewportChange:c,content:h,onContentChange:m,scrollbarX:v,onScrollbarXChange:b,scrollbarXEnabled:w,onScrollbarXEnabledChange:R,scrollbarY:k,onScrollbarYChange:P,scrollbarYEnabled:S,onScrollbarYEnabledChange:E,onCornerWidthChange:y,onCornerHeightChange:j,children:e.jsx(O.div,{dir:A,...d,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":f+"px","--radix-scroll-area-corner-height":g+"px",...s.style}})})});js.displayName=ve;var vs="ScrollAreaViewport",ys=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,children:n,nonce:a,...o}=s,d=_(vs,t),i=l.useRef(null),u=F(r,i,d.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(O.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...s.style},children:e.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});ys.displayName=vs;var T="ScrollAreaScrollbar",ye=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=_(T,s.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:d}=a,i=s.orientation==="horizontal";return l.useEffect(()=>(i?o(!0):d(!0),()=>{i?o(!1):d(!1)}),[i,o,d]),a.type==="hover"?e.jsx(It,{...n,ref:r,forceMount:t}):a.type==="scroll"?e.jsx(Bt,{...n,ref:r,forceMount:t}):a.type==="auto"?e.jsx(Ns,{...n,ref:r,forceMount:t}):a.type==="always"?e.jsx(Ne,{...n,ref:r}):null});ye.displayName=T;var It=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=_(T,s.__scopeScrollArea),[o,d]=l.useState(!1);return l.useEffect(()=>{const i=a.scrollArea;let u=0;if(i){const x=()=>{window.clearTimeout(u),d(!0)},c=()=>{u=window.setTimeout(()=>d(!1),a.scrollHideDelay)};return i.addEventListener("pointerenter",x),i.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),i.removeEventListener("pointerenter",x),i.removeEventListener("pointerleave",c)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(Y,{present:t||o,children:e.jsx(Ns,{"data-state":o?"visible":"hidden",...n,ref:r})})}),Bt=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=_(T,s.__scopeScrollArea),o=s.orientation==="horizontal",d=le(()=>u("SCROLL_END"),100),[i,u]=Lt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(i==="idle"){const x=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(x)}},[i,a.scrollHideDelay,u]),l.useEffect(()=>{const x=a.viewport,c=o?"scrollLeft":"scrollTop";if(x){let h=x[c];const m=()=>{const v=x[c];h!==v&&(u("SCROLL"),d()),h=v};return x.addEventListener("scroll",m),()=>x.removeEventListener("scroll",m)}},[a.viewport,o,u,d]),e.jsx(Y,{present:t||i!=="hidden",children:e.jsx(Ne,{"data-state":i==="hidden"?"hidden":"visible",...n,ref:r,onPointerEnter:M(s.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:M(s.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Ns=l.forwardRef((s,r)=>{const t=_(T,s.__scopeScrollArea),{forceMount:n,...a}=s,[o,d]=l.useState(!1),i=s.orientation==="horizontal",u=le(()=>{if(t.viewport){const x=t.viewport.offsetWidth<t.viewport.scrollWidth,c=t.viewport.offsetHeight<t.viewport.scrollHeight;d(i?x:c)}},10);return H(t.viewport,u),H(t.content,u),e.jsx(Y,{present:n||o,children:e.jsx(Ne,{"data-state":o?"visible":"hidden",...a,ref:r})})}),Ne=l.forwardRef((s,r)=>{const{orientation:t="vertical",...n}=s,a=_(T,s.__scopeScrollArea),o=l.useRef(null),d=l.useRef(0),[i,u]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),x=Ds(i.viewport,i.content),c={...n,sizes:i,onSizesChange:u,hasThumb:x>0&&x<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:m=>d.current=m};function h(m,v){return Ht(m,d.current,i,v)}return t==="horizontal"?e.jsx(zt,{...c,ref:r,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollLeft,v=as(m,i,a.dir);o.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):t==="vertical"?e.jsx(Ot,{...c,ref:r,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollTop,v=as(m,i);o.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),zt=l.forwardRef((s,r)=>{const{sizes:t,onSizesChange:n,...a}=s,o=_(T,s.__scopeScrollArea),[d,i]=l.useState(),u=l.useRef(null),x=F(r,u,o.onScrollbarXChange);return l.useEffect(()=>{u.current&&i(getComputedStyle(u.current))},[u]),e.jsx(ks,{"data-orientation":"horizontal",...a,ref:x,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":oe(t)+"px",...s.style},onThumbPointerDown:c=>s.onThumbPointerDown(c.x),onDragScroll:c=>s.onDragScroll(c.x),onWheelScroll:(c,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+c.deltaX;s.onWheelScroll(m),Ps(m,h)&&c.preventDefault()}},onResize:()=>{u.current&&o.viewport&&d&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:ae(d.paddingLeft),paddingEnd:ae(d.paddingRight)}})}})}),Ot=l.forwardRef((s,r)=>{const{sizes:t,onSizesChange:n,...a}=s,o=_(T,s.__scopeScrollArea),[d,i]=l.useState(),u=l.useRef(null),x=F(r,u,o.onScrollbarYChange);return l.useEffect(()=>{u.current&&i(getComputedStyle(u.current))},[u]),e.jsx(ks,{"data-orientation":"vertical",...a,ref:x,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":oe(t)+"px",...s.style},onThumbPointerDown:c=>s.onThumbPointerDown(c.y),onDragScroll:c=>s.onDragScroll(c.y),onWheelScroll:(c,h)=>{if(o.viewport){const m=o.viewport.scrollTop+c.deltaY;s.onWheelScroll(m),Ps(m,h)&&c.preventDefault()}},onResize:()=>{u.current&&o.viewport&&d&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:ae(d.paddingTop),paddingEnd:ae(d.paddingBottom)}})}})}),[Ft,ws]=bs(T),ks=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:d,onThumbPointerDown:i,onThumbPositionChange:u,onDragScroll:x,onWheelScroll:c,onResize:h,...m}=s,v=_(T,t),[b,k]=l.useState(null),P=F(r,C=>k(C)),f=l.useRef(null),y=l.useRef(""),g=v.viewport,j=n.content-n.viewport,w=U(c),R=U(u),S=le(h,10);function E(C){if(f.current){const A=C.clientX-f.current.left,L=C.clientY-f.current.top;x({x:A,y:L})}}return l.useEffect(()=>{const C=A=>{const L=A.target;(b==null?void 0:b.contains(L))&&w(A,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[g,b,j,w]),l.useEffect(R,[n,R]),H(b,S),H(v.content,S),e.jsx(Ft,{scope:t,scrollbar:b,hasThumb:a,onThumbChange:U(o),onThumbPointerUp:U(d),onThumbPositionChange:R,onThumbPointerDown:U(i),children:e.jsx(O.div,{...m,ref:P,style:{position:"absolute",...m.style},onPointerDown:M(s.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),f.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:M(s.onPointerMove,E),onPointerUp:M(s.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,v.viewport&&(v.viewport.style.scrollBehavior=""),f.current=null})})})}),re="ScrollAreaThumb",Cs=l.forwardRef((s,r)=>{const{forceMount:t,...n}=s,a=ws(re,s.__scopeScrollArea);return e.jsx(Y,{present:t||a.hasThumb,children:e.jsx(Ut,{ref:r,...n})})}),Ut=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,style:n,...a}=s,o=_(re,t),d=ws(re,t),{onThumbPositionChange:i}=d,u=F(r,h=>d.onThumbChange(h)),x=l.useRef(void 0),c=le(()=>{x.current&&(x.current(),x.current=void 0)},100);return l.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(c(),!x.current){const v=Wt(h,i);x.current=v,i()}};return i(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,c,i]),e.jsx(O.div,{"data-state":d.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:M(s.onPointerDownCapture,h=>{const v=h.target.getBoundingClientRect(),b=h.clientX-v.left,k=h.clientY-v.top;d.onThumbPointerDown({x:b,y:k})}),onPointerUp:M(s.onPointerUp,d.onThumbPointerUp)})});Cs.displayName=re;var we="ScrollAreaCorner",Ss=l.forwardRef((s,r)=>{const t=_(we,s.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?e.jsx($t,{...s,ref:r}):null});Ss.displayName=we;var $t=l.forwardRef((s,r)=>{const{__scopeScrollArea:t,...n}=s,a=_(we,t),[o,d]=l.useState(0),[i,u]=l.useState(0),x=!!(o&&i);return H(a.scrollbarX,()=>{var h;const c=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(c),u(c)}),H(a.scrollbarY,()=>{var h;const c=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(c),d(c)}),x?e.jsx(O.div,{...n,ref:r,style:{width:o,height:i,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function ae(s){return s?parseInt(s,10):0}function Ds(s,r){const t=s/r;return isNaN(t)?0:t}function oe(s){const r=Ds(s.viewport,s.content),t=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,n=(s.scrollbar.size-t)*r;return Math.max(n,18)}function Ht(s,r,t,n="ltr"){const a=oe(t),o=a/2,d=r||o,i=a-d,u=t.scrollbar.paddingStart+d,x=t.scrollbar.size-t.scrollbar.paddingEnd-i,c=t.content-t.viewport,h=n==="ltr"?[0,c]:[c*-1,0];return Rs([u,x],h)(s)}function as(s,r,t="ltr"){const n=oe(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,o=r.scrollbar.size-a,d=r.content-r.viewport,i=o-n,u=t==="ltr"?[0,d]:[d*-1,0],x=ft(s,u);return Rs([0,d],[0,i])(x)}function Rs(s,r){return t=>{if(s[0]===s[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(s[1]-s[0]);return r[0]+n*(t-s[0])}}function Ps(s,r){return s>0&&s<r}var Wt=(s,r=()=>{})=>{let t={left:s.scrollLeft,top:s.scrollTop},n=0;return function a(){const o={left:s.scrollLeft,top:s.scrollTop},d=t.left!==o.left,i=t.top!==o.top;(d||i)&&r(),t=o,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function le(s,r){const t=U(s),n=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(n.current),[]),l.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,r)},[t,r])}function H(s,r){const t=U(r);pt(()=>{let n=0;if(s){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return a.observe(s),()=>{window.cancelAnimationFrame(n),a.unobserve(s)}}},[s,t])}var As=js,Vt=ys,Kt=Ss;const _s=l.forwardRef(({className:s,children:r,...t},n)=>e.jsxs(As,{ref:n,className:te("relative overflow-hidden",s),...t,children:[e.jsx(Vt,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(Ts,{}),e.jsx(Kt,{})]}));_s.displayName=As.displayName;const Ts=l.forwardRef(({className:s,orientation:r="vertical",...t},n)=>e.jsx(ye,{ref:n,orientation:r,className:te("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...t,children:e.jsx(Cs,{className:"bg-border relative flex-1 rounded-full"})}));Ts.displayName=ye.displayName;function Yt({open:s,onClose:r,teamLeader:t,members:n,missionId:a}){const[o,d]=l.useState({});l.useEffect(()=>{if(s&&n.length>0){const c={};n.forEach(h=>{console.log(`âœ… ${h.name} (${h.id}): ${h.status}`),h.status==="attended"&&(c[h.id]=!0)}),d(c)}},[s,n]);const i=c=>{d(h=>({...h,[c]:!h[c]}))},u=Object.values(o).filter(Boolean).length,x=()=>{const c=Object.entries(o).filter(([,h])=>h).map(([h])=>parseInt(h));B.post("/attendance-members",{user_ids:c,mission_id:a},{onSuccess:()=>{r()},onError:h=>{console.error("Presensi gagal:",h)}})};return e.jsx(G,{open:s,onOpenChange:r,children:e.jsxs(X,{className:"max-w-lg",children:[e.jsx(q,{children:e.jsx(cs,{children:"Presensi Kehadiran Anggota"})}),e.jsxs("div",{className:"mb-4 space-y-1",children:[e.jsx(me,{htmlFor:"leader",children:"Ketua Tim"}),e.jsx(rt,{id:"leader",value:t,disabled:!0,className:"text-gray-900 bg-gray-100 border-gray-400"})]}),e.jsx(me,{children:"Anggota Tim"}),e.jsx(_s,{className:"pr-2 mb-4 h-60",children:n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(c=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{id:`member-${c.id}`,checked:o[c.id]||!1,onCheckedChange:()=>i(c.id)}),e.jsx(me,{htmlFor:`member-${c.id}`,children:c.name})]},c.id))}):e.jsx("p",{className:"text-sm italic text-gray-500",children:"- Tidak ada anggota -"})}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Jumlah Anggota Volunteer:"," ",e.jsx("span",{className:"font-semibold",children:n.length}),e.jsx("br",{}),"Jumlah Anggota Hadir:"," ",e.jsx("span",{className:"font-semibold",children:u})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(D,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(D,{className:"bg-sky-600 hover:bg-sky-700",onClick:x,children:"Simpan"})]})]})})}function Gt({open:s,onClose:r,onConfirm:t,is_leader:n}){return e.jsx(G,{open:s,onOpenChange:r,children:e.jsxs(X,{children:[e.jsx(q,{children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Konfirmasi Batal Pendaftaran"})}),e.jsx("div",{className:"py-4 text-gray-700",children:n?e.jsxs("p",{children:["Apakah Anda yakin ingin batal mendaftar sebagai"," ",e.jsx("strong",{children:"Ketua Tim"}),"?"]}):e.jsxs("p",{children:["Apakah Anda yakin ingin batal mendaftar sebagai"," ",e.jsx("strong",{children:"Anggota Tim"}),"?"]})}),e.jsxs(fe,{children:[e.jsx(D,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(D,{onClick:t,className:"bg-sky-600 hover:bg-sky-700",children:"Ya, Saya Yakin"})]})]})})}function Xt({open:s,onClose:r,onConfirm:t}){return e.jsx(G,{open:s,onOpenChange:r,children:e.jsxs(X,{children:[e.jsx(q,{children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Konfirmasi Pendaftaran"})}),e.jsx("div",{className:"py-4 text-gray-700",children:e.jsxs("p",{children:["Apakah Anda yakin ingin mendaftar sebagai"," ",e.jsx("strong",{children:"Komunitas"}),"? Jika Anda terpilih, Anda akan otomatis menjadi ketua tim."]})}),e.jsxs(fe,{children:[e.jsx(D,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(D,{onClick:t,className:"bg-sky-600 hover:bg-sky-700",children:"Ya, Saya Yakin"})]})]})})}function qt({open:s,onClose:r,onConfirm:t,role:n}){const a=n==="ketua";return e.jsx(G,{open:s,onOpenChange:r,children:e.jsxs(X,{children:[e.jsx(q,{children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Konfirmasi Pendaftaran"})}),e.jsx("div",{className:"py-4 text-gray-700",children:a?e.jsxs("p",{children:["Apakah Anda yakin ingin mendaftar sebagai"," ",e.jsx("strong",{children:"Ketua Tim"}),"? Jika ketua sudah terpilih, Anda akan otomatis menjadi anggota."]}):e.jsxs("p",{children:["Apakah Anda yakin ingin bergabung sebagai"," ",e.jsx("strong",{children:"Anggota Tim"}),"?"]})}),e.jsxs(fe,{children:[e.jsx(D,{variant:"outline",onClick:r,children:"Batal"}),e.jsx(D,{onClick:t,className:"bg-sky-600 hover:bg-sky-700",children:"Ya, Saya Yakin"})]})]})})}function Jt({open:s,onClose:r,missionId:t}){const[n,a]=l.useState([]),[o,d]=l.useState(""),[i,u]=l.useState(!1),[x,c]=l.useState(!1),h=g=>{const j=g.target.files;j&&m(Array.from(j))},m=g=>{const j=g.map(w=>{const S=w.type.startsWith("video/");return{file:w,preview:URL.createObjectURL(w),id:Math.random().toString(36).substr(2,9),type:S?"video":"image"}});a(w=>[...w,...j])},v=g=>{a(j=>{const w=j.find(R=>R.id===g);return w&&URL.revokeObjectURL(w.preview),j.filter(R=>R.id!==g)})},b=g=>{g.preventDefault(),u(!0)},k=g=>{g.preventDefault(),u(!1)},P=g=>{g.preventDefault(),u(!1);const j=Array.from(g.dataTransfer.files).filter(w=>w.type.startsWith("image/"));j.length>0&&m(j)},f=async()=>{if(n.length===0){alert("Pilih setidaknya satu gambar untuk diupload");return}c(!0);const g=new FormData;n.forEach(j=>{g.append("media[]",j.file)}),g.append("mission_id",t.toString()),g.append("content",o);try{await B.post("/mission/media-documentation/upload",g,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{n.forEach(j=>{URL.revokeObjectURL(j.preview)}),a([]),d(""),r()},onError:j=>{console.error("Upload failed:",j)},onFinish:()=>{c(!1)}})}catch(j){console.error("Upload error:",j),c(!1)}},y=()=>{n.forEach(g=>{URL.revokeObjectURL(g.preview)}),a([]),d(""),r()};return e.jsx(G,{open:s,onOpenChange:y,children:e.jsxs(X,{className:"max-h-[80vh] max-w-2xl overflow-y-auto",children:[e.jsx(q,{children:e.jsxs(cs,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5"}),"Upload Dokumentasi Misi"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Deskripsi Dokumentasi"}),e.jsx("textarea",{value:o,onChange:g=>d(g.target.value),placeholder:"Jelaskan tentang dokumentasi ini...",className:"w-full resize-none rounded-md border border-gray-300 p-3 focus:border-transparent focus:ring-2 focus:ring-blue-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Gambar Dokumentasi"}),e.jsxs("div",{className:`rounded-lg border-2 border-dashed p-6 text-center transition-colors ${i?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:b,onDragLeave:k,onDrop:P,children:[e.jsx(pe,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsxs("p",{className:"mb-2 text-gray-600",children:["Drag & drop gambar di sini atau"," ",e.jsxs("label",{className:"cursor-pointer text-blue-600 hover:text-blue-700",children:["pilih file",e.jsx("input",{type:"file",multiple:!0,accept:"image/jpeg,image/png,image/jpg,image/gif,video/mp4,video/quicktime,video/x-msvideo,video/x-ms-wmv",onChange:h,className:"hidden"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Maksimal 2MB per file, format: JPG, PNG, GIF"})]})]}),n.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"mb-3 text-sm font-medium text-gray-700",children:["Preview Gambar (",n.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3",children:n.map(g=>e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg border bg-gray-100",children:g.type==="image"?e.jsx("img",{src:g.preview,alt:g.file.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-4.596-2.65A1 1 0 009 9.34v5.32a1 1 0 001.156.982l4.596-1.02A1 1 0 0016 13.68v-3.36a1 1 0 00-1.248-.984z"})})})}),e.jsx("button",{onClick:()=>v(g.id),className:"absolute right-2 top-2 rounded-full bg-red-500 p-1 text-white opacity-0 transition-opacity hover:bg-red-600 group-hover:opacity-100",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx("p",{className:"mt-1 truncate text-xs text-gray-500",children:g.file.name})]},g.id))})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[e.jsx("button",{onClick:y,disabled:x,className:"rounded-md border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Batal"}),e.jsx("button",{onClick:f,disabled:x||n.length===0,className:"flex items-center gap-2 rounded-md bg-blue-600 px-6 py-2 text-white hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-4 w-4"}),"Upload (",n.length,")"]})})]})]})]})})}const ge=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),Qt=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}),Zt=(s="")=>s.split(" ").map(r=>r[0]).join("").toUpperCase().substring(0,2),er=({isOpen:s,onClose:r,onSubmit:t,loading:n})=>{const[a,o]=l.useState(""),[d,i]=l.useState(""),u=[25e3,5e4,1e5,25e4,5e5,1e6],x=()=>{const m=parseInt(a.replace(/\D/g,""));if(!m||m<1e4){i("Minimal donasi adalah Rp 10.000");return}i(""),t(m)},c=m=>{const v=m.replace(/\D/g,"");o(v),i("")},h=m=>m?parseInt(m.replace(/\D/g,"")).toLocaleString("id-ID"):"";return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"flex w-full max-w-3xl overflow-hidden transition-all duration-300 transform scale-100 bg-white shadow-2xl rounded-2xl",children:[e.jsx("div",{className:"hidden bg-gray-200 md:block md:w-1/2",children:e.jsx("img",{src:"/donasi.jpg",alt:"Donation context",className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"flex flex-col w-full p-8 md:w-1/2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"flex items-center text-2xl font-bold text-gray-800",children:[e.jsx(vt,{className:"w-6 h-6 mr-3 text-sky-600"}),"Jumlah Donasi"]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("span",{className:"absolute font-medium text-gray-500 transform -translate-y-1/2 left-4 top-1/2",children:"Rp"}),e.jsx("input",{type:"text",value:h(a),onChange:m=>c(m.target.value),className:"w-full py-3 pl-12 pr-4 text-lg text-gray-800 transition-colors border border-gray-300 rounded-lg focus:border-sky-500 focus:ring-2 focus:ring-sky-500",placeholder:"0",disabled:n})]}),d&&e.jsx("p",{className:"mb-4 text-sm text-red-600",children:d}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("p",{className:"flex items-center mb-3 text-sm font-medium text-gray-600",children:[e.jsx("span",{className:"mr-2 h-1.5 w-1.5 rounded-full bg-sky-500"}),"Pilihan Cepat:"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map(m=>e.jsx("button",{type:"button",onClick:()=>{o(m.toString()),i("")},className:`rounded-lg border px-4 py-2 text-sm font-medium transition-all duration-200 ${parseInt(a)===m?"border-sky-600 bg-sky-600 text-white":"border-gray-300 bg-white hover:border-sky-400 hover:bg-sky-50"}`,disabled:n,children:ge(m).replace(/\s*Rp/g,"")},m))})]})]}),e.jsxs("div",{className:"mt-auto space-y-3",children:[e.jsx(D,{onClick:x,disabled:n||!a,className:"w-full h-auto py-3 text-base font-semibold rounded-lg bg-sky-600 hover:bg-sky-700",children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 mr-3 border-2 border-white rounded-full animate-spin border-t-transparent"}),e.jsx("span",{children:"Memproses..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"Donasi Sekarang"})]})}),e.jsx(D,{type:"button",variant:"outline",onClick:r,disabled:n,className:"w-full h-auto py-3 font-medium border-gray-300 rounded-lg hover:bg-gray-100",children:"Batal"}),e.jsxs("p",{className:"pt-2 text-xs text-center text-gray-500",children:[e.jsx("span",{className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full bg-sky-500"}),"Donasi Anda akan langsung disalurkan untuk penanganan"]})]})]})]})}):null};function sr({donations:s,reportId:r}){const[t,n]=l.useState(!1),[a,o]=l.useState(!1),[d,i]=l.useState(!1),{props:u}=os(),{midtrans_client_key:x,midtrans_is_production:c}=u,{totalAmount:h,totalDonors:m}=l.useMemo(()=>({totalAmount:s.reduce((y,g)=>y+g.amount,0),totalDonors:s.length}),[s]),v=()=>{const f=document.querySelector('meta[name="csrf-token"]');return f&&f.getAttribute("content")||""},b=(f,y)=>{switch(f){case"report.donate":return`/donate/report/${y}`;case"payment.success":return`/api/payment-success/${y}`;default:return""}},k=async(f,y)=>{console.log(`Mengirim konfirmasi untuk ID Donasi: ${f}`),console.log("Payment result data:",y);try{const g=typeof route<"u"?route("payment.success",f):b("payment.success",f),j=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":v()},body:JSON.stringify({donation_id:f,payment_data:y||{},status:"success"})});if(!j.ok){const R=await j.text();console.error("Payment confirmation error response:",R);let S;try{S=JSON.parse(R)}catch{S={message:`Server error: ${j.status} ${j.statusText}`}}throw new Error(S.message||"Gagal mengkonfirmasi pembayaran di server.")}const w=await j.json();return console.log("Konfirmasi pembayaran berhasil dikirim ke server:",w),w}catch(g){throw console.error("Gagal mengirim konfirmasi pembayaran:",g),g}},P=async f=>{var y;i(!0);try{const g=await fetch(route("donate.report",r),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.getAttribute("content"))||"",Accept:"application/json"},body:JSON.stringify({amount:f,report_id:r})}),j=await g.json();if(g.ok&&j){const w=j.donation_id,R=j.snap_token||j;o(!1),i(!1),window.snap.pay(R,{onSuccess:async function(S){console.log("Payment success:",S),console.log("Donation ID:",w);try{await k(w,S),console.log("handleSuccessPayment completed successfully"),window.location.reload()}catch(E){console.error("Error in handleSuccessPayment:",E),window.location.reload()}},onPending:function(S){console.log("Payment pending:",S),window.location.reload()},onError:function(S){console.log("Payment error:",S),alert("Pembayaran gagal. Halaman akan dimuat ulang."),B.reload()},onClose:function(){console.log("Payment popup closed")}})}else throw new Error(j.message||"Gagal memproses donasi")}catch(g){i(!1),console.error("Error submitting donation:",g),alert("Terjadi kesalahan. Silakan coba lagi.")}};return e.jsxs(e.Fragment,{children:[e.jsx(Zs,{children:e.jsx("script",{src:c?"https://app.midtrans.com/snap/snap.js":"https://app.sandbox.midtrans.com/snap/snap.js","data-client-key":x})}),e.jsx(ee,{className:"bg-gradient-to-r from-sky-50 to-sky-50",children:e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"w-12 h-12 mx-auto mb-4 text-sky-600"}),e.jsx("h3",{className:"mb-2 text-xl font-semibold",children:"Donasi untuk Penanganan"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Bantu penanganan masalah ini dengan memberikan donasi"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-white/70",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(Dt,{className:"w-5 h-5 mr-2 text-sky-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Donasi"})]}),e.jsx("p",{className:"text-lg font-bold text-sky-700",children:ge(h)})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white/70",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(ts,{className:"w-5 h-5 mr-2 text-sky-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Donatur"})]}),e.jsxs("p",{className:"text-lg font-bold text-sky-700",children:[m," Orang"]})]})]}),m>0&&e.jsxs("div",{children:[e.jsxs("button",{className:"flex items-center justify-center w-full mb-4 text-sm transition-colors text-sky-700 hover:text-sky-800",onClick:()=>n(!t),children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),t?"Sembunyikan":"Lihat"," Daftar Donatur",t?e.jsx(bt,{className:"w-4 h-4 ml-2"}):e.jsx(jt,{className:"w-4 h-4 ml-2"})]}),t&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"overflow-y-auto max-h-64",children:e.jsx("div",{className:"space-y-3",children:s.map(f=>e.jsxs("div",{className:"flex items-center justify-between p-3 text-left rounded-lg bg-white/70",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:f.user.profile_url?e.jsx("img",{className:"object-cover w-8 h-8 rounded-full",src:`/storage/${f.user.profile_url}`,alt:f.user.name}):e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-sky-100",children:e.jsx("span",{className:"text-xs font-medium text-sky-700",children:Zt(f.user.name)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:f.user.name}),e.jsx("p",{className:"text-xs text-gray-500",children:Qt(f.created_at)})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-sky-700",children:ge(f.amount)})})]},f.id))})})})]}),e.jsxs(D,{size:"lg",className:"w-full bg-sky-600 hover:bg-sky-700",onClick:()=>o(!0),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Donasi Sekarang"]})]})})}),e.jsx(er,{isOpen:a,onClose:()=>o(!1),onSubmit:P,loading:d})]})}const tr=({children:s,className:r=""})=>e.jsx("div",{className:`rounded-lg border bg-white shadow-sm ${r}`,children:s}),rr=({children:s})=>e.jsx("div",{className:"p-6 pb-4",children:s}),ar=({children:s,className:r=""})=>e.jsx("h3",{className:`text-lg font-semibold ${r}`,children:s}),nr=({children:s})=>e.jsx("div",{className:"p-6 pt-0",children:s}),Es=et.forwardRef(({className:s="",...r},t)=>e.jsx("textarea",{className:`w-full resize-none rounded-md border border-gray-300 px-3 py-2 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500 ${s}`,ref:t,...r}));Es.displayName="Textarea";const ns=({children:s,variant:r="default",size:t="md",className:n="",...a})=>{const o="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",d={default:"bg-sky-600 text-white hover:bg-sky-700 focus:ring-sky-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-sky-500"},i={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return e.jsx("button",{className:`${o} ${d[r]} ${i[t]} ${n}`,...a,children:s})},or=({reportId:s})=>{const{data:r,setData:t,post:n,processing:a,errors:o,reset:d}=ls({comment:"",media:null,report_id:s}),[i,u]=l.useState(null),x=l.useRef(null);l.useEffect(()=>{if(r.media)if(r.media.type.startsWith("image/")){const b=new FileReader;b.onloadend=()=>u(b.result),b.readAsDataURL(r.media)}else u(null);else u(null)},[r.media]);const c=b=>{var k;t("media",((k=b.target.files)==null?void 0:k[0])||null)},h=()=>{t("media",null),x.current&&(x.current.value="")},m=b=>{b.preventDefault(),n(route("comments.store"),{forceFormData:!0,onSuccess:()=>{d()},preserveScroll:!0})},v=b=>{if(b===0)return"0 Bytes";const k=1024,P=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(b)/Math.log(k));return parseFloat((b/Math.pow(k,f)).toFixed(2))+" "+P[f]};return e.jsxs(tr,{children:[e.jsx(rr,{children:e.jsxs(ar,{className:"flex items-center",children:[e.jsx(St,{size:20,className:"mr-2"}),"Tambah Komentar"]})}),e.jsx(nr,{children:e.jsxs("form",{onSubmit:m,children:[e.jsx(Es,{placeholder:"Tulis komentar Anda...",value:r.comment,onChange:b=>t("comment",b.target.value),rows:3,className:"mb-3"}),o.comment&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.comment}),o.media&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.media}),r.media&&e.jsx("div",{className:"mt-2 mb-4",children:i?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:i,alt:"Preview",className:"object-contain h-auto max-w-full border border-gray-200 rounded-lg max-h-48"}),e.jsx("button",{type:"button",onClick:h,className:"absolute p-1 text-white bg-red-500 rounded-full -right-2 -top-2 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500",children:e.jsx(he,{size:14})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center min-w-0 space-x-3",children:[e.jsx(yt,{size:24,className:"flex-shrink-0 text-blue-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r.media.name}),e.jsx("p",{className:"text-sm text-gray-500",children:v(r.media.size)})]})]}),e.jsx("button",{type:"button",onClick:h,className:"flex-shrink-0 p-1 text-red-500 rounded hover:text-red-700 focus:outline-none",children:e.jsx(he,{size:16})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs(ns,{type:"button",variant:"outline",onClick:()=>{var b;return(b=x.current)==null?void 0:b.click()},children:[e.jsx(pe,{size:16,className:"mr-2"}),"Lampirkan File"]}),e.jsx("input",{type:"file",ref:x,onChange:c,accept:"image/*,video/*",className:"hidden"}),e.jsx(ns,{type:"submit",disabled:a,children:a?"Mengirim...":"Kirim Komentar"})]})]})})]})},lr=({report:s,onBack:r,myParticipation:t,confirmedLeader:n,comments:a,volunteers:o,volunteerCounts:d,user:i,your_vote:u,donations:x,chatGroup:c})=>{var _e,Te,Ee,Le,Me,Ie,Be,ze,Oe,Fe,Ue,$e,He,We,Ve,Ke,Ye;const[h,m]=l.useState(u==="upvote"),[v,b]=l.useState(u==="dislike"),[k,P]=l.useState(s),[f,y]=l.useState(null),g=n??[];console.log(n);const{data:j,setData:w,post:R,processing:S,reset:E}=ls({comment:"",report_id:s.id,reply_id:null}),[C,A]=l.useState(!1),L=4,[W,Ls]=l.useState(!1),ke=3,Ms=(_e=s.mission)==null?void 0:_e.documentation.reduce((p,N)=>(p[N.content]||(p[N.content]=[]),p[N.content].push(N),p),{}),Q=Object.entries(Ms||{}),Is=W?Q??[]:(Q??[]).slice(0,ke),Bs=(Q??[]).length>ke,zs=C?a??[]:(a??[]).slice(0,L),Os=a.length>L,[Fs,Ce]=l.useState(!1),[Us,ie]=l.useState(!1),[$s,Se]=l.useState(!1),[Hs,ce]=l.useState(!1),[Ws,de]=l.useState(!1),[De,Vs]=l.useState("anggota");console.log("donasi masuk:",x),console.log("myParticipation:",t),console.log("ini komen",a);const Re=p=>{Vs(p),ce(!0)},Ks=()=>{de(!0)},Ys=()=>{var p;B.delete(route("volunteer.cancel",(p=s.mission)==null?void 0:p.id),{preserveScroll:!0,onSuccess:()=>{Qe.success("Pendaftaran berhasil dibatalkan"),ie(!1)},onError:()=>{Qe.error("Gagal membatalkan pendaftaran")}})},Gs=()=>{const p=c.id;console.log("Chat Group ID:",p),p?B.get(route("chatgroup.show",p)):console.error("Gagal mengunjungi grup chat: Mission atau Chat Group ID tidak ditemukan pada laporan ini.",s)},Pe=async p=>{console.log("Handle Vote Triggered:",p);try{const N=await st.post(`/reports/${s.id}/vote`,{vote_type:p}),{upvotes_count:I,dislikes_count:V,your_vote:$}=N.data;P(Qs=>({...Qs,upvotes_count:I,dislikes_count:V})),m($==="upvote"),b($==="dislike")}catch(N){console.error(N),alert("Vote gagal")}},Xs=()=>{var N;ce(!1);const p=De==="ketua";B.post(`/join-missions/${(N=s.mission)==null?void 0:N.id}`,{is_leader:p},{onSuccess:()=>{console.log("Berhasil mendaftar"),console.log("myParticipation:",t)},onError:I=>{console.error(I)}})},qs=()=>{var p;de(!1),B.post(`/join-missions/${(p=s.mission)==null?void 0:p.id}`,{is_leader:!0},{onSuccess:()=>{console.log("Berhasil mendaftar sebagai komunitas"),console.log("myParticipation:",t)},onError:N=>{console.error(N)}})},Js=()=>{R(route("comments.store"),{onSuccess:()=>{E("comment","reply_id"),y(null)},preserveScroll:!0})},Ae=p=>{try{return ot(p)}catch{return p}};return e.jsxs("div",{className:"px-4 py-8 mx-auto space-y-6 max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(D,{variant:"ghost",onClick:r,className:"text-gray-600 hover:text-sky-600",children:[e.jsx(Nt,{size:20,className:"mr-2"}),"Kembali ke Daftar Laporan"]}),e.jsxs("div",{className:"space-x-1 text-sm text-gray-500",children:[e.jsx("span",{className:"cursor-pointer hover:underline",children:"Home"}),e.jsx("span",{className:"cursor-pointer hover:underline",children:"/ Laporan"})," ","/",e.jsx("span",{className:"font-medium text-gray-700",children:"Detail"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsx(ee,{children:e.jsxs(se,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between mb-6 md:flex-row",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx(K,{className:"text-gray-700 bg-white border border-gray-400",children:nt(s.category)}),e.jsx(K,{className:dt(s.status),children:ct(s.status)}),s.mission&&e.jsx(K,{className:"text-indigo-700 bg-indigo-100",children:"Ada Misi"})]}),e.jsx("h1",{className:"mb-4 text-3xl font-bold text-gray-900",children:s.title}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ge,{size:16,className:"mr-2"}),e.jsxs("span",{children:["Dilaporkan oleh:"," ",(Te=s.reporter)==null?void 0:Te.name]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{size:16,className:"mr-2"}),e.jsx("span",{children:Z(s.created_at)})]}),e.jsxs("a",{href:`https://www.google.com/maps?q=${s.latitude},${s.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-start cursor-pointer text-sky-700 hover:underline md:col-span-2",children:[e.jsx(Pt,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:[s.latitude," -"," ",s.longitude]})]}),e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(wt,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:[(Ee=s.district)==null?void 0:Ee.name,","," ",(Le=s.city)==null?void 0:Le.name,","," ",(Me=s.province)==null?void 0:Me.name]})]})]})]})," "]}),e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Media Pendukung"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2",children:(Ie=s.media)==null?void 0:Ie.map((p,N)=>{var I;return e.jsx("div",{className:"overflow-hidden bg-black rounded-lg aspect-video",children:(I=p.media_type)!=null&&I.startsWith("video")?e.jsx("video",{controls:!0,className:"object-contain w-full h-full",src:`/storage/${p.media_url}`}):e.jsx(ss,{src:`/storage/${p.media_url}`,alt:`Media laporan ${N+1}`})},N)})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Lokasi Detail"}),e.jsx("p",{className:"leading-relaxed text-gray-700",children:s.address})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Deskripsi Laporan"}),e.jsx("p",{className:"leading-relaxed text-gray-700",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-4 py-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>Pe("upvote"),className:`flex items-center rounded-md border px-3 py-2 transition-colors ${h?"border-sky-600 bg-sky-600 text-white hover:bg-sky-700":"border-gray-300 text-gray-600 hover:bg-gray-100"} `,children:[e.jsx(kt,{size:16,className:"mr-2"}),k.upvotes_count]}),e.jsxs("button",{onClick:()=>Pe("dislike"),className:`flex items-center rounded-md border px-3 py-2 transition-colors ${v?"border-red-600 bg-red-600 text-white hover:bg-red-700":"border-gray-300 text-gray-600 hover:bg-gray-100"} `,children:[e.jsx(Ct,{size:16,className:"mr-2"}),k.dislikes_count]})]}),s.status==="completed"&&e.jsxs("div",{className:"p-6 mt-6 border-2 shadow-lg rounded-xl border-emerald-200 bg-gradient-to-br from-emerald-50 to-green-50",children:[e.jsx("div",{className:"flex items-center mb-4 space-x-3",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-800",children:"Laporan dan Misi Terkait Selesai!"}),e.jsx("p",{className:"text-sm font-medium text-emerald-600",children:"Detail penyelesaian"})]})}),e.jsxs("div",{className:"inline-flex items-center px-3 py-1 mb-4 text-xs font-semibold border rounded-full border-emerald-300 bg-emerald-100 text-emerald-800",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"STATUS: COMPLETED"]}),e.jsxs("div",{className:"p-4 border rounded-lg border-emerald-100 bg-white/70",children:[e.jsxs("h4",{className:"flex items-center mb-3 font-semibold text-emerald-800",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Laporan Akhir:"]}),e.jsx("div",{className:"prose-sm prose max-w-none",children:e.jsx("p",{className:"leading-relaxed text-justify text-gray-700",children:s.completion_details||e.jsx("span",{className:"italic text-gray-500",children:"Tidak ada detail laporan yang disertakan"})})})]}),e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsx("div",{className:"flex items-center space-x-2 text-emerald-600",children:e.jsx("span",{className:"text-sm font-medium",children:"Terima kasih atas kontribusi dari pihak yang terlibat!"})})})]})]})}),s.mission&&e.jsxs(ee,{children:[e.jsx(Ze,{children:e.jsx(es,{className:"text-sky-700",children:"Misi Terkait"})}),e.jsxs(se,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.jsx(K,{className:it((Be=s.mission)==null?void 0:Be.status),children:lt((ze=s.mission)==null?void 0:ze.status)})}),e.jsx("h1",{className:"mb-4 text-3xl font-bold text-gray-900",children:(Oe=s.mission)==null?void 0:Oe.title}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ge,{size:16,className:"mr-2"}),e.jsxs("span",{children:["Diverifikasi oleh:"," ",(Ue=(Fe=s.mission)==null?void 0:Fe.creator)==null?void 0:Ue.name]})]}),e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(ue,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:["Misi dibuat:"," ",Z(($e=s.mission)==null?void 0:$e.created_at)]})]}),e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(ue,{size:16,className:"mr-2 mt-0.5"}),e.jsxs("span",{children:["Pelaksanaan:"," ",Z((He=s.mission)==null?void 0:He.scheduled_date)]})]})]}),e.jsxs("div",{className:"my-6",children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Deskripsi Misi"}),e.jsx("p",{className:"leading-relaxed text-gray-700",children:s.mission.description})]}),s.status==="under-authority"?e.jsxs("div",{className:"my-6",children:[e.jsx(K,{className:"mb-3 text-lg font-semibold text-black bg-yellow-300",children:"Misi Khusus Pihak Berwenang"}),e.jsx("p",{className:"text-gray-700",children:"Misi ini ditangani oleh otoritas terkait dan tidak terbuka untuk partisipasi umum."})]}):(We=s.mission)!=null&&We.volunteers?e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2",children:[e.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-indigo-100 rounded-full",children:e.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Ketua Tim"})]}),g.length>0?e.jsx("div",{className:"space-y-2",children:g.map(p=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-md bg-indigo-50",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 text-xs font-medium text-indigo-700 bg-indigo-200 rounded-full",children:p.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-700",children:p.name})]},p.id))}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-dashed rounded-full"}),e.jsx("span",{className:"text-sm",children:"Belum ada ketua tim"})]})]}),e.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Anggota Tim"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:d||0}),e.jsx("span",{className:"ml-1 text-sm text-gray-600",children:"orang"})]}),e.jsx("div",{className:"px-3 py-1 rounded-full bg-blue-50",children:e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Bergabung"})})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[t==null&&e.jsx(e.Fragment,{children:(i==null?void 0:i.role)==="community"?e.jsx(D,{variant:"outline",className:"text-black bg-yellow-400 hover:bg-black hover:text-yellow-400",onClick:Ks,children:"Daftar sebagai Komunitas"}):e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>Re("ketua"),children:"Ikut sebagai Ketua Tim"}),e.jsx(D,{variant:"outline",onClick:()=>Re("anggota"),children:"Ikut sebagai Anggota"})]})}),t&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Kamu sudah mendaftar sebagai"," ",e.jsxs("strong",{children:[t.pivot.is_leader?"Ketua":"Anggota"," "]}),"(",t.pivot.participation_status,")"]}),e.jsx(qt,{open:Hs,onClose:()=>ce(!1),onConfirm:Xs,role:De}),e.jsx(Xt,{open:Ws,onClose:()=>de(!1),onConfirm:qs}),t&&["pending","confirmed"].includes(t.pivot.participation_status)&&e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>ie(!0),variant:"destructive",children:"Batal Daftar"}),e.jsxs(D,{onClick:()=>Gs(),className:"text-white transition-all duration-300 shadow-md bg-gradient-to-r from-emerald-500 to-green-600 hover:-translate-y-px hover:from-emerald-600 hover:to-green-700 hover:shadow-lg",children:[e.jsx(rs,{className:"w-4 h-4 mr-2"}),"Buka Obrolan Grup"]}),e.jsx(Gt,{open:Us,onClose:()=>ie(!1),onConfirm:Ys,is_leader:t.pivot.is_leader})]})]}),t&&t.pivot.participation_status!=="cancelled"&&t.pivot.participation_status!=="pending"&&t.pivot.is_leader?e.jsx(D,{onClick:()=>Ce(!0),className:"my-2 bg-sky-600 hover:bg-sky-700",children:"Presensi Kehadiran"}):null,e.jsx(Yt,{open:Fs,onClose:()=>Ce(!1),missionId:(Ve=s.mission)==null?void 0:Ve.id,teamLeader:n&&n.length>0?n.map(p=>p.name).join(", "):"Belum ditentukan",members:o})]}):null,((Ke=s.mission)==null?void 0:Ke.documentation)&&e.jsxs("div",{children:[s.status!=="under-authority"&&e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Dokumentasi Misi"}),t&&t.pivot.is_leader&&["confirmed","attended"].includes(t.pivot.participation_status)?e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>Se(!0),children:"Upload Dokumentasi"}),e.jsx(Jt,{open:$s,onClose:()=>Se(!1),missionId:(Ye=s.mission)==null?void 0:Ye.id})]}):e.jsx("p",{className:"text-sm italic text-gray-500",children:"Dokumentasi hanya dapat diunggah oleh ketua tim."}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`space-y-6 ${W?"max-h-96 overflow-y-auto pr-2":""}`,children:Is.map(([p,N],I)=>e.jsxs("div",{className:"p-6 my-2 transition-shadow duration-200 bg-white border border-gray-300 shadow-sm rounded-xl hover:shadow-md",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2 lg:grid-cols-3",children:N.map((V,$)=>e.jsx("div",{className:"space-y-2",children:V.media_type==="video"?e.jsxs("div",{className:"relative group",children:[e.jsx("video",{src:`/storage/${V.media_url}`,controls:!0,preload:"metadata",className:"w-full border border-gray-200 rounded-lg shadow-sm aspect-video"}),e.jsx("div",{className:"absolute px-2 py-1 text-xs text-white bg-black bg-opacity-50 rounded right-2 top-2",children:"Video"})]}):e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"mx-auto w-full max-w-[200px]",children:e.jsx(ss,{src:`/storage/${V.media_url}`,alt:`Media dokumentasi ${$+1}`,className:"object-cover w-full h-auto transition-shadow duration-200 border border-gray-200 rounded-lg shadow-sm hover:shadow-md"})}),e.jsxs("div",{className:"absolute px-2 py-1 text-xs text-white transition-opacity bg-black bg-opacity-50 rounded opacity-0 right-2 top-2 group-hover:opacity-100",children:[$+1,"/",N.length]})]})},$))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-start space-x-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-2 text-sm font-semibold text-gray-800",children:"Keterangan Dokumentasi"}),e.jsx("p",{className:"text-sm leading-relaxed text-gray-700",children:p})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-sky-100",children:e.jsx("span",{className:"text-xs font-medium text-sky-700",children:N[0].uploader.name[0]})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:N[0].uploader.name})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:Z(N[0].created_at)})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-500 rounded-full bg-gray-50",children:[N.length," ","file",N.length>1?"s":""]})})]})]})]},I))}),Bs&&e.jsx("div",{className:"flex justify-center pt-4 border-t border-gray-100",children:e.jsx("button",{onClick:()=>Ls(!W),className:"inline-flex items-center px-4 py-2 text-sm font-medium transition-colors duration-200 rounded-lg text-sky-600 hover:bg-sky-50 hover:text-sky-700",children:W?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Lihat Sedikit"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Lihat Semua (",Q.length," ","dokumentasi)"]})})})]})]})]})]}),s.is_donation?e.jsx(e.Fragment,{children:e.jsx(sr,{donations:x,reportId:s.id})}):null]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsx(Ze,{children:e.jsxs(es,{className:"flex items-center",children:[e.jsx(rs,{size:20,className:"mr-2"}),"Diskusi (",a.length," komentar)"]})}),e.jsx(se,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`space-y-4 ${C?"max-h-96 overflow-y-auto pr-2":""}`,children:zs.map(p=>e.jsx("div",{className:"p-6 transition-shadow duration-200 bg-white border border-gray-100 shadow-sm rounded-xl hover:shadow-md",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(Xe,{className:"w-10 h-10 ring-2 ring-gray-100",children:[e.jsx(qe,{src:`/storage/${p.user.profile_url}`,className:"object-cover"}),e.jsx(Je,{className:"font-semibold bg-sky-100 text-sky-700",children:p.user.name[0]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center mb-3 space-x-3",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:p.user.name.length>3?`${p.user.name.slice(0,3)}.`:p.user.name}),e.jsx("span",{className:"px-2 py-1 text-xs text-gray-500 rounded-full bg-gray-50",children:Ae(p.created_at)})]}),e.jsx("p",{className:"mb-4 leading-relaxed text-gray-700",children:p.comment}),p.media_url&&e.jsx("div",{className:"mb-4",children:p.media_type==="video"?e.jsx("video",{src:`/storage/${p.media_url}`,controls:!0,preload:"metadata",className:"w-full max-w-md border border-gray-200 rounded-lg shadow-sm aspect-video"}):e.jsx("img",{src:`/storage/${p.media_url}`,alt:"Media untuk komentar",className:"object-cover w-auto border border-gray-200 rounded-lg shadow-sm max-h-64"})}),p.replies&&p.replies.length>0&&e.jsx("div",{className:"pl-4 mt-4 ml-2 space-y-3 border-l-2 border-sky-100",children:p.replies.map(N=>e.jsxs("div",{className:"flex p-3 space-x-3 rounded-lg bg-gray-50",children:[e.jsxs(Xe,{className:"h-7 w-7 ring-1 ring-gray-200",children:[e.jsx(qe,{src:`/storage/${N.user.profile_url}`,className:"object-cover"}),e.jsx(Je,{className:"text-xs font-medium bg-sky-50 text-sky-600",children:N.user.name[0]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center mb-1 space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.user.name.length>3?`${N.user.name.slice(0,3)}.`:N.user.name}),e.jsx("span",{className:"text-xs text-gray-500",children:Ae(N.created_at)})]}),e.jsx("p",{className:"text-sm leading-relaxed text-gray-700",children:N.comment})]})]},N.id))}),e.jsxs("button",{type:"button",onClick:()=>{f===p.id?y(null):(y(p.id),w({...j,reply_id:p.id,comment:""}))},className:"inline-flex items-center mt-3 text-sm font-medium transition-colors duration-200 group text-sky-600 hover:text-sky-700",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Balas"]}),f===p.id&&e.jsxs("div",{className:"p-4 mt-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx(at,{rows:3,placeholder:`Balas komentar ${p.user.name}...`,value:j.comment,onChange:N=>w("comment",N.target.value),className:"border-gray-300 resize-none focus:border-sky-500 focus:ring-sky-500"}),e.jsxs("div",{className:"flex justify-end mt-3 space-x-2",children:[e.jsx(D,{size:"sm",variant:"outline",onClick:()=>y(null),className:"text-gray-600 hover:text-gray-700",children:"Batal"}),e.jsx(D,{size:"sm",onClick:Js,disabled:S||!j.comment.trim(),className:"text-white shadow-sm bg-sky-600 hover:bg-sky-700",children:S?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white rounded-full animate-spin border-t-transparent"}),e.jsx("span",{children:"Mengirim..."})]}):"Kirim Balasan"})]})]})]})]})},p.id))}),Os&&e.jsx("div",{className:"flex justify-center pt-4 border-t border-gray-100",children:e.jsx("button",{onClick:()=>A(!C),className:"inline-flex items-center px-4 py-2 text-sm font-medium transition-colors duration-200 rounded-lg text-sky-600 hover:bg-sky-50 hover:text-sky-700",children:C?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Lihat Sedikit"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Lihat Semua (",a.length," komentar)"]})})})]})})]}),e.jsx(or,{reportId:s.id})]})]})]})},Er=()=>{var m;const{props:s}=os(),r=((m=s.auth)==null?void 0:m.user)??null,t=s.report,n=s.myParticipation,a=s.confirmedLeader,o=s.comments,d=s.volunteers,i=s.volunteerCounts,u=s.your_vote,x=s.donations,c=s.chatGroup??null;console.log("chatGroupId di route",c),console.log("report detail page route",t);const h=()=>{B.visit(route("report"))};return e.jsx(tt,{currentPage:"report/{id}",children:e.jsx(lr,{report:t,user:r,onBack:h,your_vote:u,comments:o,confirmedLeader:a??[],myParticipation:n,volunteers:d,volunteerCounts:i,donations:x,chatGroup:c})})};export{Er as default};
