import{r as m,j as e,J as F}from"./app-DqvPgPLX.js";import{B as T,C as P}from"./CitizenLayout-CZTR47zY.js";import{B as f,I as L}from"./input-_-d2rHVp.js";import{C as o,b as B,c as I,a as h}from"./card-f358nuNf.js";import{S as v,a as y,b,c as S,d as t}from"./select-QaOMUZcd.js";import{g as R}from"./badgeStatusDonationColor-DZdIUfGW.js";import{f as z}from"./formatDate-UvSedfNW.js";import{g as E}from"./statusDonationLabel-J8B5l4QS.js";import{S as H,R as M}from"./sliders-horizontal-CY56mF2c.js";import{C as _,a as A}from"./index-DCNyB5w5.js";import{H as V}from"./Combination-bzKAMG6s.js";import"./index-28FC01iy.js";import"./createLucideIcon-9_-YZXNr.js";const Q=({donations:d})=>{const[r,i]=m.useState(""),[n,j]=m.useState("all"),[l,u]=m.useState("all"),[x,k]=m.useState(new Set),p=d.filter(s=>{var N;const a=n==="all"?!0:s.status===n,c=l==="all"?!0:l==="below50k"&&s.amount<5e4||l==="50kto100k"&&s.amount>=5e4&&s.amount<=1e5||l==="above100k"&&s.amount>1e5,D=((((N=s.report)==null?void 0:N.title)||"")+(s.transaction_id||"")).toLowerCase().includes(r.toLowerCase());return a&&c&&D}),w=()=>{i(""),j("all"),u("all")},C=s=>{const a=new Set(x);a.has(s)?a.delete(s):a.add(s),k(a)},g=r.trim()||n!=="all"||l!=="all";return e.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"Riwayat Donasi"}),e.jsx("p",{className:"text-gray-600",children:"Berikut adalah riwayat donasi Anda"})]}),e.jsxs(o,{className:"mb-6",children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(I,{className:"flex items-center justify-between gap-4 text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{size:20,className:"mr-2 text-sky-600"}),"Filter Donasi"]}),g&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-emerald-100 text-emerald-600",children:"Aktif"})]}),e.jsxs(f,{variant:"outline",size:"sm",onClick:w,disabled:!g,children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Reset Filter"]})]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status Donasi"}),e.jsxs(v,{value:n,onValueChange:j,children:[e.jsx(y,{children:e.jsx(b,{placeholder:"Semua Status"})}),e.jsxs(S,{children:[e.jsx(t,{value:"all",children:"Semua Status"}),e.jsx(t,{value:"paid",children:"Pembayaran Berhasil"}),e.jsx(t,{value:"expired",children:"Pembayaran Kadaluwarsa"}),e.jsx(t,{value:"cancelled",children:"Pembayaran Dibatalkan"}),e.jsx(t,{value:"pending",children:"Menunggu Pembayaran"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Nominal Donasi"}),e.jsxs(v,{value:l,onValueChange:u,children:[e.jsx(y,{children:e.jsx(b,{placeholder:"Semua Nominal"})}),e.jsxs(S,{children:[e.jsx(t,{value:"all",children:"Semua Nominal"}),e.jsx(t,{value:"below50k",children:"< 50.000"}),e.jsx(t,{value:"50kto100k",children:"50.000 â€“ 100.000"}),e.jsx(t,{value:"above100k",children:"> 100.000"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Pencarian Donasi"}),e.jsx(L,{type:"text",placeholder:"Cari berdasarkan Laporan atau ID Transaksi...",value:r,onChange:s=>i(s.target.value)})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[p.map(s=>{var a,c;return e.jsx(o,{className:"transition-shadow hover:shadow-md",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{children:"Laporan Terkait: "}),e.jsx("h3",{className:"mb-1 text-lg font-semibold text-gray-900",children:(a=s.report)==null?void 0:a.title}),e.jsxs("p",{className:"mb-2 text-sm text-gray-600",children:["Tanggal Donasi:"," ",z(s.created_at)]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 sm:mt-0 sm:flex-col sm:items-end",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-semibold text-emerald-600",children:["Rp"," ",s.amount.toLocaleString()]}),e.jsx(T,{className:R(s.status),children:E(s.status)})]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>C(s.id),className:"shrink-0",children:x.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Tutup"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Detail"]})})]})]}),x.has(s.id)&&e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"ID Transaksi:"}),e.jsxs("p",{className:"text-gray-600",children:["#",s.transaction_id]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Metode Pembayaran:"}),e.jsx("p",{className:"text-gray-600",children:s.payment_method||"Transfer Bank"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Deskripsi Laporan Terkait:"}),e.jsx("p",{className:"mt-1 text-gray-600",children:(c=s.report)==null?void 0:c.description})]})]})})]})},s.id)}),p.length===0&&e.jsx(o,{children:e.jsxs(h,{className:"flex flex-col items-center py-12 text-center",children:[e.jsx(V,{className:"w-10 h-10 mb-3 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"Tidak ada data donasi ditemukan."})]})})]})]})},ae=()=>{var i;const{props:d}=F(),r=((i=d.donations)==null?void 0:i.data)||[];return e.jsx(P,{currentPage:"my-donation",children:e.jsx(Q,{donations:r})})};export{ae as default};
