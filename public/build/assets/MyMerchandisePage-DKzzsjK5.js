import{r as h,j as e,J as F}from"./app-D1PQqydB.js";import{B as _,S as L,C as R}from"./CitizenLayout-D6PfXXw3.js";import{B as S,I as z}from"./input-BOaatTCr.js";import{C as p,b as I,c as A,a as j}from"./card-DS9sCv-E.js";import{S as w,a as k,b as C,c as P,d as a}from"./select-Bh72tW7-.js";import{g as E}from"./badgeStatusDonationColor-DZdIUfGW.js";import{f as D}from"./formatDate-DdkzSpcV.js";import{S as V}from"./sliders-horizontal-CIx4Y1C6.js";import{R as H}from"./refresh-ccw-DVaoXrPH.js";import{C as J,a as Q}from"./index-DwRUccRl.js";import"./index-Clxr7tAl.js";import"./Combination-Dr_exLUy.js";import"./createLucideIcon--13BBMxb.js";const K=i=>{const n=i.trim().toLowerCase();return{pending:"Menunggu",processing:"Sedang Diproses",completed:"Selesai",shipped:"Dalam Pengiriman",cancelled:"Dibatalkan"}[n]??"Status Tidak Diketahui"},U=({reedems:i,auth:n})=>{var b;const[l,c]=h.useState(""),[m,g]=h.useState("all"),[r,N]=h.useState("all"),[u,M]=h.useState(new Set),f=i.filter(s=>{var d,y;const t=m==="all"?!0:s.status===m,o=r==="all"?!0:r==="below500"&&s.points_spent<500||r==="500kto1000"&&s.points_spent>=500&&s.points_spent<=1e3||r==="above1000"&&s.points_spent>1e3,x=((((d=s.merchandise)==null?void 0:d.name)||"")+(((y=s.merchandise)==null?void 0:y.description)||"")).toLowerCase().includes(l.toLowerCase());return t&&o&&x}),B=()=>{c(""),g("all"),N("all")},T=s=>{const t=new Set(u);t.has(s)?t.delete(s):t.add(s),M(t)},v=l.trim()||m!=="all"||r!=="all";return e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-1 text-2xl font-bold text-gray-900 sm:text-3xl",children:"Riwayat Penukaran Merchandise"}),e.jsx("p",{className:"text-gray-600",children:"Berikut adalah riwayat penukaran merchandise Anda"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-md bg-yellow-100 px-3 py-1 text-sm font-semibold text-yellow-800",children:[e.jsx("svg",{className:"h-4 w-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 15l-5.878 3.09 1.122-6.545L.488 6.91l6.561-.955L10 0l2.951 5.955 6.561.955-4.756 4.635 1.122 6.545z"})}),"Poin Saya:",((b=n.user)==null?void 0:b.points_balance)||0," Poin"]}),e.jsx("button",{className:"rounded-md bg-emerald-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-emerald-700",onClick:()=>window.location.href="/merchandise",children:"Tukar Merchandise"})]})]}),e.jsxs(p,{className:"mb-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(A,{className:"flex items-center justify-between gap-4 text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{size:20,className:"mr-2 text-emerald-600"}),"Filter Penukaran Merchandise"]}),v&&e.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-1 text-xs text-emerald-600",children:"Aktif"})]}),e.jsxs(S,{variant:"outline",size:"sm",onClick:B,disabled:!v,children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Reset Filter"]})]})}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status Penukaran"}),e.jsxs(w,{value:m,onValueChange:g,children:[e.jsx(k,{children:e.jsx(C,{placeholder:"Semua Status"})}),e.jsxs(P,{children:[e.jsx(a,{value:"all",children:"Semua Status"}),e.jsx(a,{value:"pending",children:"Menunggu"}),e.jsx(a,{value:"processing",children:"Sedang Diproses"}),e.jsx(a,{value:"cancelled",children:"Dibatalkan"}),e.jsx(a,{value:"completed",children:"Selesai"}),e.jsx(a,{value:"shipped",children:"Dalam Pengiriman"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Nominal Poin Merchandise"}),e.jsxs(w,{value:r,onValueChange:N,children:[e.jsx(k,{children:e.jsx(C,{placeholder:"Semua Nominal"})}),e.jsxs(P,{children:[e.jsx(a,{value:"all",children:"Semua Nominal"}),e.jsx(a,{value:"below500",children:"< 500"}),e.jsx(a,{value:"500to1000",children:"500 â€“ 1000"}),e.jsx(a,{value:"above1000",children:"> 1000"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Pencarian Penukaran Item"}),e.jsx(z,{type:"text",placeholder:"Cari berdasarkan Nama atau Deskripsi Merchandise...",value:l,onChange:s=>c(s.target.value)})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[f.map(s=>{var t,o,x,d;return e.jsx(p,{className:"transition-shadow hover:shadow-md",children:e.jsxs(j,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 gap-4",children:[e.jsx("img",{src:`/storage/${(t=s.merchandise)==null?void 0:t.image_url}`,alt:(o=s.merchandise)==null?void 0:o.name,className:"h-16 w-16 rounded-md object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Barang Merchandise"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(x=s.merchandise)==null?void 0:x.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Tanggal Penukaran:"," ",D(s.created_at)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-semibold text-emerald-600",children:[s.points_spent.toLocaleString()," ","Poin"]}),e.jsx(_,{className:E(s.status),children:K(s.status)})]}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>T(s.id),className:"shrink-0",children:u.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Tutup"]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Detail"]})})]})]}),u.has(s.id)&&e.jsxs("div",{className:"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 p-4 text-sm shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800",children:"Deskripsi Barang Merchandise"}),e.jsx("p",{className:"mt-1 text-gray-600",children:((d=s.merchandise)==null?void 0:d.description)||"Tidak ada deskripsi"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"mb-2 text-base font-semibold text-gray-800",children:"Informasi Pengiriman"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Alamat Pengiriman"}),e.jsx("p",{className:"text-gray-600",children:s.shipping_address||"Alamat tidak diketahui"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Tracking Number"}),e.jsx("p",{className:"text-gray-600",children:s.tracking_number||"Belum ada Tracking Number"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Layanan Jasa Kirim"}),e.jsx("p",{className:"text-gray-600",children:s.logistic||"Belum ada Pengiriman"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Status Terakhir Diperbarui"}),e.jsx("p",{className:"text-gray-600",children:D(s.updated_at)||"Belum diperbarui"})]})]})]})]})]})},s.id)}),f.length===0&&e.jsx(p,{children:e.jsxs(j,{className:"flex flex-col items-center py-12 text-center",children:[e.jsx(L,{className:"mb-3 h-10 w-10 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"Tidak ada data penukaran merchandise."})]})})]})]})},ie=()=>{var c;const{props:i}=F(),n=i.reedems||[];console.log(n);const l=((c=i.auth)==null?void 0:c.user)??null;return l?e.jsx(R,{currentPage:"my-merchandise",children:e.jsx(U,{auth:{user:l},reedems:n})}):null};export{ie as default};
